<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.19" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.71" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://hr-koala.github.io/htblog/htblog/largeFront/react/react_hooks.html"><meta property="og:site_name" content="åšå®¢å’Œéšç¬”"><meta property="og:title" content="React Hook"><meta property="og:description" content="1. å¯¹ React Hook çš„ç†è§£ï¼Œå®ƒçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆ Hooks çš„æœ¬è´¨ï¼šä¸€å¥—èƒ½å¤Ÿä½¿å‡½æ•°ç»„ä»¶æ›´å¼ºå¤§ï¼Œæ›´çµæ´»çš„â€œé’©å­â€.è®©å‡½æ•°ç»„ä»¶å¯ä»¥æ‹¥æœ‰è‡ªå·±çš„çŠ¶æ€ Hooks çš„å‡ºç°è§£å†³äº†ä¿©ä¸ªé—®é¢˜: 1. ç»„ä»¶çš„çŠ¶æ€é€»è¾‘å¤ç”¨ 2.class ç»„ä»¶è‡ªèº«çš„é—®é¢˜ React-Hooks æ˜¯ React å›¢é˜Ÿåœ¨ React ç»„ä»¶å¼€å‘å®è·µä¸­ï¼Œé€æ¸è®¤çŸ¥åˆ°çš„ä¸€ä¸ªæ”¹è¿›ç‚¹ï¼Œè¿™èƒŒå..."><meta property="og:type" content="article"><meta property="og:image" content="https://hr-koala.github.io/htblog/htblog/images/react/react7.png"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-02-26T14:47:36.000Z"><meta property="article:modified_time" content="2025-02-26T14:47:36.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"React Hook","image":["https://hr-koala.github.io/htblog/htblog/images/react/react7.png"],"dateModified":"2025-02-26T14:47:36.000Z","author":[{"@type":"Person","name":"htong","url":"htong890@outlook.com"}]}</script><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><title>React Hook | åšå®¢å’Œéšç¬”</title><meta name="description" content="1. å¯¹ React Hook çš„ç†è§£ï¼Œå®ƒçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆ Hooks çš„æœ¬è´¨ï¼šä¸€å¥—èƒ½å¤Ÿä½¿å‡½æ•°ç»„ä»¶æ›´å¼ºå¤§ï¼Œæ›´çµæ´»çš„â€œé’©å­â€.è®©å‡½æ•°ç»„ä»¶å¯ä»¥æ‹¥æœ‰è‡ªå·±çš„çŠ¶æ€ Hooks çš„å‡ºç°è§£å†³äº†ä¿©ä¸ªé—®é¢˜: 1. ç»„ä»¶çš„çŠ¶æ€é€»è¾‘å¤ç”¨ 2.class ç»„ä»¶è‡ªèº«çš„é—®é¢˜ React-Hooks æ˜¯ React å›¢é˜Ÿåœ¨ React ç»„ä»¶å¼€å‘å®è·µä¸­ï¼Œé€æ¸è®¤çŸ¥åˆ°çš„ä¸€ä¸ªæ”¹è¿›ç‚¹ï¼Œè¿™èƒŒå...">
    <link rel="preload" href="/htblog/assets/style-BmT4sDdj.css" as="style"><link rel="stylesheet" href="/htblog/assets/style-BmT4sDdj.css">
    <link rel="modulepreload" href="/htblog/assets/app-Bnjw32HE.js"><link rel="modulepreload" href="/htblog/assets/react_hooks.html-91YZp3vN.js"><link rel="modulepreload" href="/htblog/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/htblog/assets/index.html-CYNmuU1r.js" as="script"><link rel="prefetch" href="/htblog/assets/deepseek.html-DbSA2dc-.js" as="script"><link rel="prefetch" href="/htblog/assets/arr_flat.html-DWsPQCfp.js" as="script"><link rel="prefetch" href="/htblog/assets/arr_method.html-NdUJ5Xh4.js" as="script"><link rel="prefetch" href="/htblog/assets/bind_call_apply.html-CgE94ZQ4.js" as="script"><link rel="prefetch" href="/htblog/assets/let_const.html-Bt_d-2n8.js" as="script"><link rel="prefetch" href="/htblog/assets/promise.html-QtuO7ZV9.js" as="script"><link rel="prefetch" href="/htblog/assets/promise2.html-DH1wzl-M.js" as="script"><link rel="prefetch" href="/htblog/assets/promise3.html-xA9n342b.js" as="script"><link rel="prefetch" href="/htblog/assets/set_map.html-BmPPRlg6.js" as="script"><link rel="prefetch" href="/htblog/assets/encrypt.html-BgckB6Qk.js" as="script"><link rel="prefetch" href="/htblog/assets/leetcode.html-Dj4rAraR.js" as="script"><link rel="prefetch" href="/htblog/assets/logical_thought.html-ChxSP0zg.js" as="script"><link rel="prefetch" href="/htblog/assets/electerm.html-Cpak_aea.js" as="script"><link rel="prefetch" href="/htblog/assets/nodejs.html-DkFoWKjV.js" as="script"><link rel="prefetch" href="/htblog/assets/npm.html-P_aCUxoB.js" as="script"><link rel="prefetch" href="/htblog/assets/nvm.html-DtPnQ-dp.js" as="script"><link rel="prefetch" href="/htblog/assets/php.html-Bu88f8dP.js" as="script"><link rel="prefetch" href="/htblog/assets/typeorm.html-BOcVkJUe.js" as="script"><link rel="prefetch" href="/htblog/assets/typeormconnection.html-BtLuOEDq.js" as="script"><link rel="prefetch" href="/htblog/assets/xshell.html-DtavyDdF.js" as="script"><link rel="prefetch" href="/htblog/assets/browser.html-DVgBLtyi.js" as="script"><link rel="prefetch" href="/htblog/assets/css.html-zz_k_huY.js" as="script"><link rel="prefetch" href="/htblog/assets/scss.html-BbXvdzmz.js" as="script"><link rel="prefetch" href="/htblog/assets/finance.html-B9ojP2wW.js" as="script"><link rel="prefetch" href="/htblog/assets/h5app.html-XpfW79er.js" as="script"><link rel="prefetch" href="/htblog/assets/HTTP_HTTPS.html-C63TDM9R.js" as="script"><link rel="prefetch" href="/htblog/assets/WebSocket.html-DDwf2iJQ.js" as="script"><link rel="prefetch" href="/htblog/assets/after_url.html-LqInkhg1.js" as="script"><link rel="prefetch" href="/htblog/assets/get_network_ip.html-Cw_NDiwT.js" as="script"><link rel="prefetch" href="/htblog/assets/closure.html-BkY0JEpZ.js" as="script"><link rel="prefetch" href="/htblog/assets/curry.html-CLkOERDQ.js" as="script"><link rel="prefetch" href="/htblog/assets/d3js.html-DKK8XVYQ.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-C4aWBMa0.js" as="script"><link rel="prefetch" href="/htblog/assets/javascript1.html-DStmjZMN.js" as="script"><link rel="prefetch" href="/htblog/assets/javascript2.html-Btt8k39k.js" as="script"><link rel="prefetch" href="/htblog/assets/javascript3.html-BEDq-YsT.js" as="script"><link rel="prefetch" href="/htblog/assets/javascript_questions.html-C1_9HNJ5.js" as="script"><link rel="prefetch" href="/htblog/assets/javascriptp1.html-DBJzAbw7.js" as="script"><link rel="prefetch" href="/htblog/assets/javascriptp2.html-BumTgd7_.js" as="script"><link rel="prefetch" href="/htblog/assets/new.html-eOKN8pMW.js" as="script"><link rel="prefetch" href="/htblog/assets/string_api.html-eO2_7rpw.js" as="script"><link rel="prefetch" href="/htblog/assets/svg_base64.html-Bf2HH4yO.js" as="script"><link rel="prefetch" href="/htblog/assets/throttle.html-DsigxcFG.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-Cnzm8ahm.js" as="script"><link rel="prefetch" href="/htblog/assets/mobile_applet.html-z2HvkPpL.js" as="script"><link rel="prefetch" href="/htblog/assets/deploy.html-CvHp8CV9.js" as="script"><link rel="prefetch" href="/htblog/assets/markdown.html-BLA-Oewe.js" as="script"><link rel="prefetch" href="/htblog/assets/vuepressThemeHope.html-LlMyzaGa.js" as="script"><link rel="prefetch" href="/htblog/assets/electron.html-pAczcAaq.js" as="script"><link rel="prefetch" href="/htblog/assets/fusejs.html-DWoBYZbq.js" as="script"><link rel="prefetch" href="/htblog/assets/git_order.html-BYizCMOk.js" as="script"><link rel="prefetch" href="/htblog/assets/path_pathbrowser.html-CfacAQQC.js" as="script"><link rel="prefetch" href="/htblog/assets/pinojs.html-CsJbwiWQ.js" as="script"><link rel="prefetch" href="/htblog/assets/qiankun.html-Dtbf7xV7.js" as="script"><link rel="prefetch" href="/htblog/assets/server_base.html-DZF4n2mJ.js" as="script"><link rel="prefetch" href="/htblog/assets/setting_json.html-BwMU3PB8.js" as="script"><link rel="prefetch" href="/htblog/assets/socket.html-cLAbz8tW.js" as="script"><link rel="prefetch" href="/htblog/assets/sockjs.html-FAs7FMKE.js" as="script"><link rel="prefetch" href="/htblog/assets/sortablejs.html-Ea3borX0.js" as="script"><link rel="prefetch" href="/htblog/assets/vuepress.html-BLw0ozzb.js" as="script"><link rel="prefetch" href="/htblog/assets/wang_editor.html-CRStWgB_.js" as="script"><link rel="prefetch" href="/htblog/assets/websocket.html-IJE_eNR5.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-CNJfOcn-.js" as="script"><link rel="prefetch" href="/htblog/assets/pmp.html-D7alv5q3.js" as="script"><link rel="prefetch" href="/htblog/assets/pmp2.html-BQ5x4Ytx.js" as="script"><link rel="prefetch" href="/htblog/assets/test_questions.html-BlQNz6Ik.js" as="script"><link rel="prefetch" href="/htblog/assets/gaussDB.html-DmL-0D1z.js" as="script"><link rel="prefetch" href="/htblog/assets/åˆ¸æºä¸šåŠ¡.html-C766Kb1Y.js" as="script"><link rel="prefetch" href="/htblog/assets/åŸºé‡‘é”€å”®.html-D5WjtREd.js" as="script"><link rel="prefetch" href="/htblog/assets/æŠ¥ä»·andåè®®andå›½å€ºå›è´­.html-CfRXkB1G.js" as="script"><link rel="prefetch" href="/htblog/assets/æ™ºæ…§å£å²¸.html-C16BZ2HL.js" as="script"><link rel="prefetch" href="/htblog/assets/è‚¡ç¥¨æœŸæƒä¸šåŠ¡.html-D7nQLLW_.js" as="script"><link rel="prefetch" href="/htblog/assets/èµ„ç®¡ä»½é¢åŸºé‡‘.html-DrAqSyIP.js" as="script"><link rel="prefetch" href="/htblog/assets/travel.html-BkiBmBuO.js" as="script"><link rel="prefetch" href="/htblog/assets/error_questions.html-BATmoiU4.js" as="script"><link rel="prefetch" href="/htblog/assets/vite.html-Ws8Qe_Uh.js" as="script"><link rel="prefetch" href="/htblog/assets/vite_mult_env.html-uolTxOy8.js" as="script"><link rel="prefetch" href="/htblog/assets/webpack_vite.html-D1ebsSzI.js" as="script"><link rel="prefetch" href="/htblog/assets/loader_plugin.html-Ca9WCAv_.js" as="script"><link rel="prefetch" href="/htblog/assets/plugin.html-6dUy6fbl.js" as="script"><link rel="prefetch" href="/htblog/assets/vue2_webpack.html-DzP1RtdJ.js" as="script"><link rel="prefetch" href="/htblog/assets/webpack.html-CXOiRYXv.js" as="script"><link rel="prefetch" href="/htblog/assets/essay.html-BwsZbOIC.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-C2Ts192Y.js" as="script"><link rel="prefetch" href="/htblog/assets/react.html-DEttcWOY.js" as="script"><link rel="prefetch" href="/htblog/assets/react_build.html-DV3xsJ51.js" as="script"><link rel="prefetch" href="/htblog/assets/react_comp_communicate.html-BQuWtKel.js" as="script"><link rel="prefetch" href="/htblog/assets/react_expiration_time.html-DpVjHB3s.js" as="script"><link rel="prefetch" href="/htblog/assets/react_lane.html-CZTxssdP.js" as="script"><link rel="prefetch" href="/htblog/assets/react_life_cycle.html-BLNVzoun.js" as="script"><link rel="prefetch" href="/htblog/assets/react_problem.html-DLo2WtJN.js" as="script"><link rel="prefetch" href="/htblog/assets/react_redux.html-C7lNLqKn.js" as="script"><link rel="prefetch" href="/htblog/assets/react_router.html-BUAVeR9a.js" as="script"><link rel="prefetch" href="/htblog/assets/react_setstate.html-Dfg8BheY.js" as="script"><link rel="prefetch" href="/htblog/assets/react_state.html-KDJpkTCk.js" as="script"><link rel="prefetch" href="/htblog/assets/react_virtual_dom.html-CWbtVm-6.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-DfLgEJDY.js" as="script"><link rel="prefetch" href="/htblog/assets/axios.html-CJUEQQbV.js" as="script"><link rel="prefetch" href="/htblog/assets/diff.html-vEiZ5YDW.js" as="script"><link rel="prefetch" href="/htblog/assets/first_page_time.html-BZKBMQ5O.js" as="script"><link rel="prefetch" href="/htblog/assets/keepalive.html-B8sbEF2M.js" as="script"><link rel="prefetch" href="/htblog/assets/long-list.html-2FQZFtIm.js" as="script"><link rel="prefetch" href="/htblog/assets/nextTick.html-J_iPjoD6.js" as="script"><link rel="prefetch" href="/htblog/assets/observable.html-CKs26k3r.js" as="script"><link rel="prefetch" href="/htblog/assets/permission.html-D2pMgPFh.js" as="script"><link rel="prefetch" href="/htblog/assets/pinia.html-BgaH0ed5.js" as="script"><link rel="prefetch" href="/htblog/assets/singlePage.html-BJG9KvP4.js" as="script"><link rel="prefetch" href="/htblog/assets/ssr.html-4w1xTASw.js" as="script"><link rel="prefetch" href="/htblog/assets/token.html-DsQ-IT0U.js" as="script"><link rel="prefetch" href="/htblog/assets/virtual_dom.html-lbvIOf_L.js" as="script"><link rel="prefetch" href="/htblog/assets/vue.html-DnNjhzSm.js" as="script"><link rel="prefetch" href="/htblog/assets/vue2.html-CZZdmzqw.js" as="script"><link rel="prefetch" href="/htblog/assets/vueConfig.html-BS_S686j.js" as="script"><link rel="prefetch" href="/htblog/assets/vue_component_communication.html-DD1fTXj6.js" as="script"><link rel="prefetch" href="/htblog/assets/vue_event.html-eTTQfUDs.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-PDJuQKa_.js" as="script"><link rel="prefetch" href="/htblog/assets/composition_options_api.html-CEqEQlfY.js" as="script"><link rel="prefetch" href="/htblog/assets/computed_model.html-DXeDCJ12.js" as="script"><link rel="prefetch" href="/htblog/assets/designgoals.html-CPOGnWjU.js" as="script"><link rel="prefetch" href="/htblog/assets/env_vue.html-D1P8BesN.js" as="script"><link rel="prefetch" href="/htblog/assets/flow_chart.html-6Y_4g7XI.js" as="script"><link rel="prefetch" href="/htblog/assets/monorepo_vue3.html-BKBQGpCG.js" as="script"><link rel="prefetch" href="/htblog/assets/performance_improvement.html-JJcpf9cY.js" as="script"><link rel="prefetch" href="/htblog/assets/proxy_defineProperty.html-T43Z8X4h.js" as="script"><link rel="prefetch" href="/htblog/assets/scroll.html-97IHOCgy.js" as="script"><link rel="prefetch" href="/htblog/assets/treeshaking.html-s78-qDNc.js" as="script"><link rel="prefetch" href="/htblog/assets/vue2_vue3.html-DBqR-Wz7.js" as="script"><link rel="prefetch" href="/htblog/assets/vue3_build.html-D8PRE1WN.js" as="script"><link rel="prefetch" href="/htblog/assets/404.html-Bnh_imFl.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-XTtvABD6.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-BQGiSoUa.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-BLMP6Zca.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-DcGQUqP3.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-D12yN5FG.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-B9zCOZxW.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-QRAy0Pbi.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-rzWqc_DN.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-BueJgRlh.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-CNMvcGv1.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-nzBqvhwu.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-9ahoLT-R.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-BFQCzVf_.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-oNYUmsLi.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-BGYhZtRD.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-MSyXG_S4.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-CfPHf6un.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-BWaqUKdH.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-CL3jvMVG.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-DDlB6A27.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-Bo5F0l5-.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-DTQBHIaQ.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-BJe5Kz-r.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-Dq6FA4lv.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-DFrBbkwN.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-BecbvwTT.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-CU-WwaTQ.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-I9dUfUq4.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-DKXZFR80.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-SdLBjVwo.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-CYYlRAgf.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-D2cf_9hG.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-xJprCrO7.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-D-7qz7c4.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-MoVUrk-6.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-DIeT3z3g.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-CW2QiAr6.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-DORIezAD.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-DE5th3Sg.js" as="script"><link rel="prefetch" href="/htblog/assets/index.html-BgggavS-.js" as="script"><link rel="prefetch" href="/htblog/assets/photoswipe.esm-DXWKOczD.js" as="script"><link rel="prefetch" href="/htblog/assets/setupDevtools-7MC2TMWH-QA9KMbfT.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/htblog/" aria-label="å¸¦æˆ‘å›å®¶"><img class="vp-nav-logo" src="/htblog/assets/hero.png" alt><!----><span class="vp-site-name hide-in-pad">åšå®¢å’Œéšç¬”</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/htblog/" aria-label="ä¸»é¡µ" iconsizing="height"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:house" height="1em" sizing="height"></iconify-icon><!--]-->ä¸»é¡µ<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="å¤§å‰ç«¯"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:pen-to-square" height="1em" sizing="height"></iconify-icon>å¤§å‰ç«¯<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/htblog/largeFront/vue3/" aria-label="Vue3" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:book" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->Vue3<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/htblog/largeFront/vue/" aria-label="Vue" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:book" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->Vue<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/htblog/largeFront/react/" aria-label="React" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:pen-to-square" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->React<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="åç«¯"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:pen-to-square" height="1em" sizing="height"></iconify-icon>åç«¯<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/htblog/backend/nodejs.html" aria-label="NodeJS" iconsizing="both"><!---->NodeJS<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/htblog/backend/php.html" aria-label="Php" iconsizing="both"><!---->Php<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/htblog/backend/electerm.html" aria-label="Electerm" iconsizing="both"><!---->Electerm<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/htblog/backend/xshell.html" aria-label="Xshell" iconsizing="both"><!---->Xshell<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/htblog/algorithm/" aria-label="ç®—æ³•" iconsizing="height"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:book" height="1em" sizing="height"></iconify-icon><!--]-->ç®—æ³•<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/htblog/plugins/" aria-label="æ’ä»¶" iconsizing="height"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:book" height="1em" sizing="height"></iconify-icon><!--]-->æ’ä»¶<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/htblog/financial/" aria-label="é‡‘è" iconsizing="height"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:book" height="1em" sizing="height"></iconify-icon><!--]-->é‡‘è<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/htblog/projectManagement/" aria-label="é¡¹ç›®ç®¡ç†" iconsizing="height"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:pen-to-square" height="1em" sizing="height"></iconify-icon><!--]-->é¡¹ç›®ç®¡ç†<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/htblog/other/" aria-label="å…¶ä»–" iconsizing="height"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:pen-to-square" height="1em" sizing="height"></iconify-icon><!--]-->å…¶ä»–<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Guide"><!--[--><!---->Guide<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">htong&#39;s Bolg</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="auto-link external-link" href="https://blog.csdn.net/XJ5210224" aria-label="CSDN" rel="noopener noreferrer" target="_blank" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:link" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->CSDN<!----></a></li><li class="vp-dropdown-subitem"><a class="auto-link external-link" href="https://gitee.com/explore/all" aria-label="Gitee" rel="noopener noreferrer" target="_blank" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:link" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->Gitee<!----></a></li></ul></li></ul></button></div></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/vuepress-theme-hope/vuepress-theme-hope" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-outlook-dropdown"><!----></div></button></div><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/htblog/" aria-label="ä¸»é¡µ" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:house" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->ä¸»é¡µ<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><iconify-icon class="vp-icon" icon="fa6-solid:laptop-code" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">å¤§å‰ç«¯</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">Reactç³»åˆ—</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/htblog/largeFront/react/" aria-label="Reactç³»åˆ—" iconsizing="both"><!---->Reactç³»åˆ—<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/htblog/largeFront/react/react_hooks.html" aria-label="React Hook" iconsizing="both"><!---->React Hook<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/htblog/largeFront/react/react_problem.html" aria-label="React å¸¸è§é—®é¢˜ç‚¹(ä¸€)" iconsizing="both"><!---->React å¸¸è§é—®é¢˜ç‚¹(ä¸€)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/htblog/largeFront/react/react_expiration_time.html" aria-label="React æºç è§£æ" iconsizing="both"><!---->React æºç è§£æ<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/htblog/largeFront/react/react_life_cycle.html" aria-label="React ç”Ÿå‘½å‘¨æœŸ" iconsizing="both"><!---->React ç”Ÿå‘½å‘¨æœŸ<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/htblog/largeFront/react/react.html" aria-label="React ç»„ä»¶ çš„ç†è§£" iconsizing="both"><!---->React ç»„ä»¶ çš„ç†è§£<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/htblog/largeFront/react/react_comp_communicate.html" aria-label="React ç»„ä»¶é€šä¿¡" iconsizing="both"><!---->React ç»„ä»¶é€šä¿¡<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/htblog/largeFront/react/react_router.html" aria-label="React è·¯ç”±" iconsizing="both"><!---->React è·¯ç”±<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/htblog/largeFront/react/react_state.html" aria-label="Reactæ•°æ®ç®¡ç†" iconsizing="both"><!---->Reactæ•°æ®ç®¡ç†<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/htblog/largeFront/react/react_lane.html" aria-label="Reactè®¾è®¡åŸç†" iconsizing="both"><!---->Reactè®¾è®¡åŸç†<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/htblog/largeFront/react/react_redux.html" aria-label="Redux" iconsizing="both"><!---->Redux<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/htblog/largeFront/react/react_setstate.html" aria-label="setState" iconsizing="both"><!---->setState<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/htblog/largeFront/react/react_build.html" aria-label="ä»é›¶æ­å»ºVite+Reactå¼€å‘ç¯å¢ƒ" iconsizing="both"><!---->ä»é›¶æ­å»ºVite+Reactå¼€å‘ç¯å¢ƒ<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/htblog/largeFront/react/react_virtual_dom.html" aria-label="è™šæ‹Ÿ DOM" iconsizing="both"><!---->è™šæ‹Ÿ DOM<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Vue3ç³»åˆ—</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Vueç³»åˆ—</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="vp-icon" icon="fa6-solid:circle-info" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">åç«¯</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="vp-icon" icon="fa6-solid:book" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">ç®—æ³•</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="vp-icon" icon="fa6-solid:book" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">æµè§ˆå™¨</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="vp-icon" icon="fa6-solid:book" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">HTTP</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="vp-icon" icon="fa6-solid:book" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">JavaScript</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="vp-icon" icon="fa6-solid:book" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">ES6</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="vp-icon" icon="fa6-solid:book" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">TypeScript</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="vp-icon" icon="fa6-solid:book" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">CSS</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="vp-icon" icon="fa6-solid:book" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">H5APP</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="vp-icon" icon="fa6-solid:book" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">ç§»åŠ¨ç«¯</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="vp-icon" icon="fa6-solid:book" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">æ’ä»¶</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="vp-icon" icon="fa6-solid:book" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">Vite</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="vp-icon" icon="fa6-solid:book" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">WebPack</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="vp-icon" icon="fa6-solid:book" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">AI</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="vp-icon" icon="fa6-solid:book" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">é¡¹ç›®ç®¡ç†</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="vp-icon" icon="fa6-solid:book" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">Szkingdom</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="vp-icon" icon="fa6-solid:book" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">é‡‘è</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="vp-icon" icon="fa6-solid:book" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">éšç¬”</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="vp-icon" icon="fa6-solid:book" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">ç”Ÿæ´»</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="vp-icon" icon="fa6-solid:book" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">æ—…æ¸¸</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="vp-icon" icon="fa6-solid:book" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">å…¶ä»–</span><span class="vp-arrow end"></span></button><!----></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->React Hook</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="htong890@outlook.com" target="_blank" rel="noopener noreferrer">htong</a></span><span property="author" content="htong"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2025å¹´2æœˆ26æ—¥</span><meta property="datePublished" content="2025-02-26T14:47:36.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 22 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT22M"></span><!----><!----></div><hr></div><div class="vp-toc-placeholder"><aside id="toc" vp-toc><!----><!--[--><div class="vp-toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-å¯¹-react-hook-çš„ç†è§£-å®ƒçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆ">1. å¯¹ React Hook çš„ç†è§£ï¼Œå®ƒçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-ä¸ºä»€ä¹ˆ-usestate-è¦ä½¿ç”¨æ•°ç»„è€Œä¸æ˜¯å¯¹è±¡">2. ä¸ºä»€ä¹ˆ useState è¦ä½¿ç”¨æ•°ç»„è€Œä¸æ˜¯å¯¹è±¡</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-react-hooks-è§£å†³äº†å“ªäº›é—®é¢˜">3. React Hooks è§£å†³äº†å“ªäº›é—®é¢˜ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_4-react-hook-çš„ä½¿ç”¨é™åˆ¶æœ‰å“ªäº›">4. React Hook çš„ä½¿ç”¨é™åˆ¶æœ‰å“ªäº›ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_5-useeffect-ä¸-uselayouteffect-çš„åŒºåˆ«">5. useEffect ä¸ useLayoutEffect çš„åŒºåˆ«</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_6-react-hooks-åœ¨å¹³æ—¶å¼€å‘ä¸­éœ€è¦æ³¨æ„çš„é—®é¢˜å’ŒåŸå› ">6. React Hooks åœ¨å¹³æ—¶å¼€å‘ä¸­éœ€è¦æ³¨æ„çš„é—®é¢˜å’ŒåŸå› </a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#usecallback-å’Œ-usememo-åŒºåˆ«">useCallback å’Œ useMemo åŒºåˆ«</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_7-react-hooks-å’Œç”Ÿå‘½å‘¨æœŸçš„å…³ç³»">7. React Hooks å’Œç”Ÿå‘½å‘¨æœŸçš„å…³ç³»ï¼Ÿ</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!--]--><!----></aside></div><!----><div class="theme-hope-content" vp-content><h2 id="_1-å¯¹-react-hook-çš„ç†è§£-å®ƒçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#_1-å¯¹-react-hook-çš„ç†è§£-å®ƒçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆ"><span>1. å¯¹ React Hook çš„ç†è§£ï¼Œå®ƒçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆ</span></a></h2><blockquote><p>Hooks çš„æœ¬è´¨ï¼šä¸€å¥—èƒ½å¤Ÿä½¿å‡½æ•°ç»„ä»¶æ›´å¼ºå¤§ï¼Œæ›´çµæ´»çš„â€œé’©å­â€.<strong>è®©å‡½æ•°ç»„ä»¶å¯ä»¥æ‹¥æœ‰è‡ªå·±çš„çŠ¶æ€</strong><br> Hooks çš„å‡ºç°è§£å†³äº†ä¿©ä¸ªé—®é¢˜: 1. ç»„ä»¶çš„çŠ¶æ€é€»è¾‘å¤ç”¨ 2.class ç»„ä»¶è‡ªèº«çš„é—®é¢˜</p></blockquote><p>React-Hooks æ˜¯ React å›¢é˜Ÿåœ¨ React ç»„ä»¶å¼€å‘å®è·µä¸­ï¼Œé€æ¸è®¤çŸ¥åˆ°çš„ä¸€ä¸ªæ”¹è¿›ç‚¹ï¼Œè¿™èƒŒåå…¶å®æ¶‰åŠå¯¹<strong>ç±»ç»„ä»¶</strong>å’Œ<strong>å‡½æ•°ç»„ä»¶</strong>ä¸¤ç§ç»„ä»¶å½¢å¼çš„æ€è€ƒå’Œä¾§é‡ã€‚</p><ul><li>ï¼ˆ1ï¼‰<strong>ç±»ç»„ä»¶</strong>ï¼šæ‰€è°“ç±»ç»„ä»¶ï¼Œå°±æ˜¯åŸºäº <code>ES6 Class</code> è¿™ç§å†™æ³•ï¼Œé€šè¿‡ç»§æ‰¿ <code>React.Component</code> å¾—æ¥çš„ React ç»„ä»¶ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç±»ç»„ä»¶ï¼š</li></ul><div class="language-tsx line-numbers-mode" data-highlighter="shiki" data-ext="tsx" data-title="tsx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> DemoClass</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#50A14F;--shiki-dark:#E5C07B;"> React</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Component</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">  state</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    text</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    this.</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">changeText</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">changeText</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">bind</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  };</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  componentDidMount</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  //...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  changeText</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">newText</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setState</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">({</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">      text</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> newText</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    });</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  };</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  render</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;"> className</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;demoClass&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">p</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">text</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">p</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">button</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;"> onClick</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">changeText</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;ä¿®æ”¹&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">button</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    );</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹å‡ºï¼ŒReact ç±»ç»„ä»¶å†…éƒ¨é¢„ç½®äº†ç›¸å½“å¤šçš„â€œç°æˆçš„ä¸œè¥¿â€ç­‰ç€æˆ‘ä»¬å»è°ƒåº¦/å®šåˆ¶ï¼Œ<code>state</code> å’Œ<code>ç”Ÿå‘½å‘¨æœŸ</code>å°±æ˜¯è¿™äº›â€œç°æˆä¸œè¥¿â€ä¸­çš„å…¸å‹ã€‚è¦æƒ³å¾—åˆ°è¿™äº›ä¸œè¥¿ï¼Œéš¾åº¦ä¹Ÿä¸å¤§ï¼Œåªéœ€è¦ç»§æ‰¿ä¸€ä¸ª <code>React.Component</code> å³å¯ã€‚</p><p>å½“ç„¶ï¼Œè¿™ä¹Ÿæ˜¯ç±»ç»„ä»¶çš„ä¸€ä¸ªä¸ä¾¿ï¼Œå®ƒå¤ªç¹æ‚äº†ï¼Œå¯¹äºè§£å†³è®¸å¤šé—®é¢˜æ¥è¯´ï¼Œç¼–å†™ä¸€ä¸ªç±»ç»„ä»¶å®åœ¨æ˜¯ä¸€ä¸ªè¿‡äºå¤æ‚çš„å§¿åŠ¿ã€‚å¤æ‚çš„å§¿åŠ¿å¿…ç„¶å¸¦æ¥é«˜æ˜‚çš„ç†è§£æˆæœ¬ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬æ‰€ä¸æƒ³çœ‹åˆ°çš„ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œç”±äºå¼€å‘è€…ç¼–å†™çš„é€»è¾‘åœ¨å°è£…åæ˜¯å’Œç»„ä»¶ç²˜åœ¨ä¸€èµ·çš„ï¼Œè¿™å°±ä½¿å¾—<strong>ç±»ç»„ä»¶å†…éƒ¨çš„é€»è¾‘éš¾ä»¥å®ç°æ‹†åˆ†å’Œå¤ç”¨</strong>ã€‚</p><ul><li>ï¼ˆ2ï¼‰<strong>å‡½æ•°ç»„ä»¶</strong>ï¼šå‡½æ•°ç»„ä»¶å°±æ˜¯ä»¥å‡½æ•°çš„å½¢æ€å­˜åœ¨çš„ React ç»„ä»¶ã€‚æ—©æœŸå¹¶æ²¡æœ‰ React-Hooksï¼Œå‡½æ•°ç»„ä»¶å†…éƒ¨æ— æ³•å®šä¹‰å’Œç»´æŠ¤ stateï¼Œå› æ­¤å®ƒè¿˜æœ‰ä¸€ä¸ªåˆ«åå«â€œ<strong>æ— çŠ¶æ€ç»„ä»¶</strong>â€ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªå‡½æ•°ç»„ä»¶ï¼š</li></ul><div class="language-tsx line-numbers-mode" data-highlighter="shiki" data-ext="tsx" data-title="tsx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> DemoFunction</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">props</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  const</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">text</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> } </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> props</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  const</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">count</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">setCount</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> useState</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;"> className</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;demoFunction&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">p</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">`å‡½æ•°ç»„ä»¶æ¥æ”¶çš„å†…å®¹ï¼š[</span><span style="--shiki-light:#50A14F;--shiki-dark:#C678DD;">${</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">text</span><span style="--shiki-light:#50A14F;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">]`</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">p</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">button</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;">        onClick</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">          setCount</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">count</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">}</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      &gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">        {</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">count</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">}</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">button</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  )</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç›¸æ¯”äºç±»ç»„ä»¶ï¼Œå‡½æ•°ç»„ä»¶è‚‰çœ¼å¯è§çš„ç‰¹è´¨è‡ªç„¶åŒ…æ‹¬<strong>è½»é‡ã€çµæ´»ã€æ˜“äºç»„ç»‡å’Œç»´æŠ¤ã€è¾ƒä½çš„å­¦ä¹ æˆæœ¬</strong>ç­‰ã€‚</p><p>é€šè¿‡å¯¹æ¯”ï¼Œä»å½¢æ€ä¸Šå¯ä»¥å¯¹ä¸¤ç§ç»„ä»¶åšåŒºåˆ†ï¼Œå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«å¦‚ä¸‹ï¼š</p><ul><li>ç±»ç»„ä»¶éœ€è¦ç»§æ‰¿ <code>class</code>ï¼Œå‡½æ•°ç»„ä»¶ä¸éœ€è¦ï¼›</li><li>ç±»ç»„ä»¶å¯ä»¥è®¿é—®ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œå‡½æ•°ç»„ä»¶ä¸èƒ½ï¼›</li><li>ç±»ç»„ä»¶ä¸­å¯ä»¥è·å–åˆ°å®ä¾‹åŒ–åçš„ <code>this</code>ï¼Œå¹¶åŸºäºè¿™ä¸ª this åšå„ç§å„æ ·çš„äº‹æƒ…ï¼Œè€Œå‡½æ•°ç»„ä»¶ä¸å¯ä»¥ï¼›</li><li>ç±»ç»„ä»¶ä¸­å¯ä»¥å®šä¹‰å¹¶ç»´æŠ¤ <code>state</code>ï¼ˆçŠ¶æ€ï¼‰ï¼Œè€Œå‡½æ•°ç»„ä»¶ä¸å¯ä»¥ï¼›</li></ul><p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„ä¸åŒã€‚é€šè¿‡ä¸Šé¢çš„åŒºåˆ«ï¼Œæˆ‘ä»¬ä¸èƒ½è¯´è°å¥½è°åï¼Œå®ƒä»¬å„æœ‰è‡ªå·±çš„ä¼˜åŠ¿ã€‚åœ¨ ReactHooks å‡ºç°ä¹‹å‰ï¼Œ<strong>ç±»ç»„ä»¶çš„èƒ½åŠ›è¾¹ç•Œæ˜æ˜¾å¼ºäºå‡½æ•°ç»„ä»¶</strong>ã€‚</p><p>å®é™…ä¸Šï¼Œç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶ä¹‹é—´ï¼Œæ˜¯<strong>é¢å‘å¯¹è±¡</strong>å’Œ<strong>å‡½æ•°å¼ç¼–ç¨‹</strong>è¿™ä¸¤å¥—ä¸åŒçš„è®¾è®¡æ€æƒ³ä¹‹é—´çš„å·®å¼‚ã€‚è€Œ<strong>å‡½æ•°ç»„ä»¶æ›´åŠ å¥‘åˆ React æ¡†æ¶çš„è®¾è®¡ç†å¿µ</strong>ï¼š<br><img src="/htblog/images/react/react7.png" alt="" loading="lazy"></p><p>React ç»„ä»¶æœ¬èº«çš„å®šä½å°±æ˜¯å‡½æ•°ï¼Œä¸€ä¸ªè¾“å…¥æ•°æ®ã€è¾“å‡º UI çš„å‡½æ•°ã€‚ä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘ä»¬ç¼–å†™çš„æ˜¯å£°æ˜å¼çš„ä»£ç ï¼Œ<br> è€Œ React æ¡†æ¶çš„ä¸»è¦å·¥ä½œï¼Œå°±æ˜¯åŠæ—¶åœ°æŠŠå£°æ˜å¼çš„ä»£ç è½¬æ¢ä¸ºå‘½ä»¤å¼çš„ DOM æ“ä½œï¼ŒæŠŠæ•°æ®å±‚é¢çš„æè¿°æ˜ å°„åˆ°ç”¨æˆ·å¯è§çš„ UI å˜åŒ–ä¸­å»ã€‚è¿™å°±æ„å‘³ç€ä»åŸåˆ™ä¸Šæ¥è®²ï¼ŒReact çš„æ•°æ®åº”è¯¥æ€»æ˜¯ç´§ç´§åœ°å’Œæ¸²æŸ“ç»‘å®šåœ¨ä¸€èµ·çš„ï¼Œè€Œç±»ç»„ä»¶åšä¸åˆ°è¿™ä¸€ç‚¹ã€‚<strong>å‡½æ•°ç»„ä»¶å°±çœŸæ­£åœ°å°†æ•°æ®å’Œæ¸²æŸ“ç»‘å®šåˆ°äº†ä¸€èµ·ã€‚å‡½æ•°ç»„ä»¶æ˜¯ä¸€ä¸ªæ›´åŠ åŒ¹é…å…¶è®¾è®¡ç†å¿µã€ä¹Ÿæ›´æœ‰åˆ©äºé€»è¾‘æ‹†åˆ†ä¸é‡ç”¨çš„ç»„ä»¶è¡¨è¾¾å½¢å¼</strong>ã€‚</p><p>ä¸ºäº†èƒ½è®©å¼€å‘è€…æ›´å¥½çš„çš„å»ç¼–å†™å‡½æ•°å¼ç»„ä»¶ã€‚äºæ˜¯ï¼ŒReact-Hooks ä¾¿åº”è¿è€Œç”Ÿã€‚<br> React-Hooks æ˜¯ä¸€å¥—èƒ½å¤Ÿä½¿å‡½æ•°ç»„ä»¶æ›´å¼ºå¤§ã€æ›´çµæ´»çš„â€œé’©å­â€ã€‚</p><p>å‡½æ•°ç»„ä»¶æ¯”èµ·ç±»ç»„ä»¶å°‘äº†å¾ˆå¤šä¸œè¥¿ï¼Œæ¯”å¦‚<code>ç”Ÿå‘½å‘¨æœŸ</code>ã€<code>å¯¹ state çš„ç®¡ç†</code>ç­‰ã€‚è¿™å°±ç»™å‡½æ•°ç»„ä»¶çš„ä½¿ç”¨å¸¦æ¥äº†éå¸¸å¤šçš„å±€é™æ€§ï¼Œå¯¼è‡´æˆ‘ä»¬å¹¶ä¸èƒ½ä½¿ç”¨å‡½æ•°è¿™ç§å½¢å¼ï¼Œå†™å‡ºä¸€ä¸ªçœŸæ­£çš„å…¨åŠŸèƒ½çš„ç»„ä»¶ã€‚è€Œ React-Hooks çš„å‡ºç°ï¼Œå°±æ˜¯ä¸ºäº†å¸®åŠ©å‡½æ•°ç»„ä»¶è¡¥é½è¿™äº›ï¼ˆç›¸å¯¹äºç±»ç»„ä»¶æ¥è¯´ï¼‰ç¼ºå¤±çš„èƒ½åŠ›ã€‚</p><p>å¦‚æœè¯´å‡½æ•°ç»„ä»¶æ˜¯ä¸€å°è½»å·§çš„å¿«è‰‡ï¼Œé‚£ä¹ˆ <code>React-Hooks</code> å°±æ˜¯ä¸€ä¸ªå†…å®¹ä¸°å¯Œçš„é›¶éƒ¨ä»¶ç®±ã€‚â€œé‡è£…æˆ˜èˆ°â€æ‰€é¢„ç½®çš„é‚£äº›è®¾å¤‡ï¼Œè¿™ä¸ªç®±å­é‡ŒåŸºæœ¬å…¨éƒ½æœ‰ï¼ŒåŒæ—¶å®ƒè¿˜ä¸å¼ºåˆ¶ä½ å…¨éƒ½è¦ï¼Œè€Œæ˜¯å…è®¸ä½ è‡ªç”±åœ°é€‰æ‹©å’Œä½¿ç”¨ä½ éœ€è¦çš„é‚£äº›èƒ½åŠ›ï¼Œç„¶åå°†è¿™äº›èƒ½åŠ›ä»¥ <code>Hook</code>ï¼ˆé’©å­ï¼‰çš„å½¢å¼â€œé’©â€è¿›ä½ çš„ç»„ä»¶é‡Œï¼Œä»è€Œå®šåˆ¶å‡ºä¸€ä¸ªæœ€é€‚åˆä½ çš„â€œä¸“å±æˆ˜èˆ°â€ã€‚</p><h2 id="_2-ä¸ºä»€ä¹ˆ-usestate-è¦ä½¿ç”¨æ•°ç»„è€Œä¸æ˜¯å¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#_2-ä¸ºä»€ä¹ˆ-usestate-è¦ä½¿ç”¨æ•°ç»„è€Œä¸æ˜¯å¯¹è±¡"><span>2. ä¸ºä»€ä¹ˆ useState è¦ä½¿ç”¨æ•°ç»„è€Œä¸æ˜¯å¯¹è±¡</span></a></h2><p><code>useState</code> çš„ç”¨æ³•ï¼š</p><div class="language-tsx line-numbers-mode" data-highlighter="shiki" data-ext="tsx" data-title="tsx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">count</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">setCount</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> useState</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ° useState è¿”å›çš„æ˜¯ä¸€ä¸ª<strong>æ•°ç»„</strong>ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆæ˜¯è¿”å›æ•°ç»„è€Œä¸æ˜¯è¿”å›å¯¹è±¡å‘¢ï¼Ÿ</p><p>è¿™é‡Œç”¨åˆ°äº†è§£æ„èµ‹å€¼ï¼Œæ‰€ä»¥å…ˆæ¥çœ‹ä¸€ä¸‹ ES6 çš„è§£æ„èµ‹å€¼ï¼š</p><p>æ•°ç»„çš„è§£æ„èµ‹å€¼</p><div class="language-tsx line-numbers-mode" data-highlighter="shiki" data-ext="tsx" data-title="tsx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> foo</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">one</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">two</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">three</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> foo</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">one</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">two</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 2</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">three</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 3</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹è±¡çš„è§£æ„èµ‹å€¼</p><div class="language-tsx line-numbers-mode" data-highlighter="shiki" data-ext="tsx" data-title="tsx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> user</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">  id</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 888</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">  name</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;xiaoxin&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> } </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> user</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 888</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// &quot;xiaoxin&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>çœ‹å®Œè¿™ä¸¤ä¸ªä¾‹å­ï¼Œç­”æ¡ˆåº”è¯¥å°±å‡ºæ¥äº†ï¼š</p><ul><li>å¦‚æœ <code>useState</code> è¿”å›çš„æ˜¯æ•°ç»„ï¼Œé‚£ä¹ˆä½¿ç”¨è€…å¯ä»¥å¯¹æ•°ç»„ä¸­çš„å…ƒç´ å‘½åï¼Œä»£ç çœ‹èµ·æ¥ä¹Ÿæ¯”è¾ƒå¹²å‡€</li><li>å¦‚æœ <code>useState</code> è¿”å›çš„æ˜¯å¯¹è±¡ï¼Œåœ¨è§£æ„å¯¹è±¡çš„æ—¶å€™å¿…é¡»è¦å’Œ useState å†…éƒ¨å®ç°è¿”å›çš„å¯¹è±¡åŒåï¼Œæƒ³è¦ä½¿ç”¨å¤šæ¬¡çš„è¯ï¼Œå¿…é¡»å¾—è®¾ç½®åˆ«åæ‰èƒ½ä½¿ç”¨è¿”å›å€¼</li></ul><p>ä¸‹é¢æ¥çœ‹çœ‹å¦‚æœ useState è¿”å›å¯¹è±¡çš„æƒ…å†µï¼š</p><div class="language-tsx line-numbers-mode" data-highlighter="shiki" data-ext="tsx" data-title="tsx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ç¬¬ä¸€æ¬¡ä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">setState</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> } </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> useState</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ç¬¬äºŒæ¬¡ä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">counter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">setState</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">setCounter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> } </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> useState</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œè¿”å›å¯¹è±¡çš„ä½¿ç”¨æ–¹å¼è¿˜æ˜¯æŒºéº»çƒ¦çš„ï¼Œæ›´ä½•å†µå®é™…é¡¹ç›®ä¸­ä¼šä½¿ç”¨çš„æ›´é¢‘ç¹ã€‚</p><p><strong>æ€»ç»“</strong>ï¼š<code>useState</code> è¿”å›çš„æ˜¯ <code>array</code> è€Œä¸æ˜¯ object çš„åŸå› å°±æ˜¯ä¸ºäº†<strong>é™ä½ä½¿ç”¨çš„å¤æ‚åº¦</strong>ï¼Œè¿”å›æ•°ç»„çš„è¯å¯ä»¥ç›´æ¥æ ¹æ®<br> é¡ºåºè§£æ„ï¼Œè€Œè¿”å›å¯¹è±¡çš„è¯è¦æƒ³ä½¿ç”¨å¤šæ¬¡å°±éœ€è¦å®šä¹‰åˆ«åäº†ã€‚</p><h2 id="_3-react-hooks-è§£å†³äº†å“ªäº›é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_3-react-hooks-è§£å†³äº†å“ªäº›é—®é¢˜"><span>3. React Hooks è§£å†³äº†å“ªäº›é—®é¢˜ï¼Ÿ</span></a></h2><p>React Hooks ä¸»è¦è§£å†³äº†ä»¥ä¸‹é—®é¢˜ï¼š</p><p>ï¼ˆ1ï¼‰<strong>åœ¨ç»„ä»¶ä¹‹é—´å¤ç”¨çŠ¶æ€é€»è¾‘å¾ˆéš¾</strong></p><p>React æ²¡æœ‰æä¾›å°†å¯å¤ç”¨æ€§è¡Œä¸ºâ€œé™„åŠ â€åˆ°ç»„ä»¶çš„é€”å¾„ï¼ˆä¾‹å¦‚ï¼ŒæŠŠç»„ä»¶è¿æ¥åˆ° storeï¼‰è§£å†³æ­¤ç±»é—®é¢˜å¯ä»¥ä½¿ç”¨<code>render props</code> å’Œ é«˜é˜¶ç»„ä»¶ã€‚ä½†æ˜¯è¿™ç±»æ–¹æ¡ˆéœ€è¦é‡æ–°ç»„ç»‡ç»„ä»¶ç»“æ„ï¼Œè¿™å¯èƒ½ä¼šå¾ˆéº»çƒ¦ï¼Œå¹¶ä¸”ä¼šä½¿ä»£ç éš¾ä»¥ç†è§£ã€‚<br> ç”± <code>providers</code>ï¼Œ<code>consumers</code>ï¼Œ<code>é«˜é˜¶ç»„ä»¶</code>ï¼Œ<code>render props</code> ç­‰å…¶ä»–æŠ½è±¡å±‚ç»„æˆçš„ç»„ä»¶ä¼šå½¢æˆâ€œåµŒå¥—åœ°ç‹±â€ã€‚å°½ç®¡å¯ä»¥åœ¨ <code>DevTools</code> è¿‡æ»¤æ‰å®ƒä»¬ï¼Œä½†è¿™è¯´æ˜äº†ä¸€ä¸ªæ›´æ·±å±‚æ¬¡çš„é—®é¢˜ï¼šReact éœ€è¦ä¸ºå…±äº«çŠ¶æ€é€»è¾‘æä¾›æ›´å¥½çš„åŸç”Ÿé€”å¾„ã€‚</p><p>å¯ä»¥ä½¿ç”¨ <code>Hook</code> ä»ç»„ä»¶ä¸­æå–çŠ¶æ€é€»è¾‘ï¼Œä½¿å¾—è¿™äº›é€»è¾‘å¯ä»¥å•ç‹¬æµ‹è¯•å¹¶å¤ç”¨ã€‚Hook ä½¿æˆ‘ä»¬åœ¨æ— éœ€ä¿®æ”¹ç»„ä»¶ç»“æ„çš„æƒ…å†µä¸‹å¤ç”¨çŠ¶æ€é€»è¾‘ã€‚ è¿™ä½¿å¾—åœ¨ç»„ä»¶é—´æˆ–ç¤¾åŒºå†…å…±äº« Hook å˜å¾—æ›´ä¾¿æ·ã€‚</p><p>ï¼ˆ2ï¼‰<strong>å¤æ‚ç»„ä»¶å˜å¾—éš¾ä»¥ç†è§£</strong></p><p>åœ¨ç»„ä»¶ä¸­ï¼Œæ¯ä¸ªç”Ÿå‘½å‘¨æœŸå¸¸å¸¸åŒ…å«ä¸€äº›ä¸ç›¸å…³çš„é€»è¾‘ã€‚ä¾‹å¦‚ï¼Œç»„ä»¶å¸¸å¸¸åœ¨ <code>componentDidMount</code> å’Œ<code>componentDidUpdate</code> ä¸­è·å–æ•°æ®ã€‚ä½†æ˜¯ï¼ŒåŒä¸€ä¸ª <code>componentDidMount</code> ä¸­å¯èƒ½ä¹ŸåŒ…å«å¾ˆå¤šå…¶å®ƒçš„é€»è¾‘ï¼Œå¦‚è®¾ç½®äº‹ä»¶ç›‘å¬ï¼Œè€Œä¹‹åéœ€åœ¨ <code>componentWillUnmount</code> ä¸­æ¸…é™¤ã€‚ç›¸äº’å…³è”ä¸”éœ€è¦å¯¹ç…§ä¿®æ”¹çš„ä»£ç è¢«è¿›è¡Œäº†æ‹†åˆ†ï¼Œè€Œå®Œå…¨ä¸ç›¸å…³çš„ä»£ç å´åœ¨åŒä¸€ä¸ªæ–¹æ³•ä¸­ç»„åˆåœ¨ä¸€èµ·ã€‚å¦‚æ­¤å¾ˆå®¹æ˜“äº§ç”Ÿ bugï¼Œå¹¶ä¸”å¯¼è‡´é€»è¾‘ä¸ä¸€è‡´ã€‚</p><p>åœ¨å¤šæ•°æƒ…å†µä¸‹ï¼Œä¸å¯èƒ½å°†ç»„ä»¶æ‹†åˆ†ä¸ºæ›´å°çš„ç²’åº¦ï¼Œå› ä¸ºçŠ¶æ€é€»è¾‘æ— å¤„ä¸åœ¨ã€‚è¿™ä¹Ÿç»™æµ‹è¯•å¸¦æ¥äº†ä¸€å®šæŒ‘æˆ˜ã€‚åŒæ—¶ï¼Œè¿™ä¹Ÿæ˜¯å¾ˆå¤šäººå°† React ä¸çŠ¶æ€ç®¡ç†åº“ç»“åˆä½¿ç”¨çš„åŸå› ä¹‹ä¸€ã€‚ä½†æ˜¯ï¼Œè¿™å¾€å¾€ä¼šå¼•å…¥äº†å¾ˆå¤šæŠ½è±¡æ¦‚å¿µï¼Œéœ€è¦ä½ åœ¨ä¸åŒçš„æ–‡ä»¶ä¹‹é—´æ¥å›åˆ‡æ¢ï¼Œä½¿å¾—å¤ç”¨å˜å¾—æ›´åŠ å›°éš¾ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒHook å°†ç»„ä»¶ä¸­ç›¸äº’å…³è”çš„éƒ¨åˆ†æ‹†åˆ†æˆæ›´å°çš„å‡½æ•°ï¼ˆæ¯”å¦‚è®¾ç½®è®¢é˜…æˆ–è¯·æ±‚æ•°æ®ï¼‰ï¼Œè€Œå¹¶éå¼º<br> åˆ¶æŒ‰ç…§ç”Ÿå‘½å‘¨æœŸåˆ’åˆ†ã€‚ä½ è¿˜å¯ä»¥ä½¿ç”¨ <code>reducer</code> æ¥ç®¡ç†ç»„ä»¶çš„å†…éƒ¨çŠ¶æ€ï¼Œä½¿å…¶æ›´åŠ å¯é¢„æµ‹ã€‚</p><p>ï¼ˆ3ï¼‰<strong>éš¾ä»¥ç†è§£çš„ class</strong></p><p>é™¤äº†ä»£ç å¤ç”¨å’Œä»£ç ç®¡ç†ä¼šé‡åˆ°å›°éš¾å¤–ï¼Œclass æ˜¯å­¦ä¹  React çš„ä¸€å¤§å±éšœã€‚æˆ‘ä»¬å¿…é¡»å»ç†è§£ JavaScript ä¸­ <code>this</code> çš„å·¥ä½œæ–¹å¼ï¼Œè¿™ä¸å…¶ä»–è¯­è¨€å­˜åœ¨å·¨å¤§å·®å¼‚ã€‚è¿˜ä¸èƒ½å¿˜è®°ç»‘å®šäº‹ä»¶å¤„ç†å™¨ã€‚æ²¡æœ‰ç¨³å®šçš„è¯­æ³•ææ¡ˆï¼Œè¿™äº›ä»£ç éå¸¸å†—ä½™ã€‚<br> å¤§å®¶å¯ä»¥å¾ˆå¥½åœ°ç†è§£ <code>props</code>ï¼Œ<code>state</code> å’Œ<code>è‡ªé¡¶å‘ä¸‹çš„æ•°æ®æµ</code>ï¼Œä½†å¯¹ class å´ä¸€ç­¹è«å±•ã€‚å³ä¾¿åœ¨æœ‰ç»éªŒçš„ React å¼€å‘è€…ä¹‹é—´ï¼Œå¯¹äºå‡½æ•°ç»„ä»¶ä¸ class ç»„ä»¶çš„å·®å¼‚ä¹Ÿå­˜åœ¨åˆ†æ­§ï¼Œç”šè‡³è¿˜è¦åŒºåˆ†ä¸¤ç§ç»„ä»¶çš„ä½¿ç”¨åœºæ™¯ã€‚</p><p>ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼ŒHook ä½¿ä½ åœ¨é class çš„æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨æ›´å¤šçš„ React ç‰¹æ€§ã€‚ ä»æ¦‚å¿µä¸Šè®²ï¼ŒReact ç»„ä»¶ä¸€ç›´æ›´åƒæ˜¯å‡½æ•°ã€‚è€Œ <code>Hook</code> åˆ™æ‹¥æŠ±äº†å‡½æ•°ï¼ŒåŒæ—¶ä¹Ÿæ²¡æœ‰ç‰ºç‰² React çš„ç²¾ç¥åŸåˆ™ã€‚Hook æä¾›äº†é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼Œæ— éœ€å­¦ä¹ å¤æ‚çš„å‡½æ•°å¼æˆ–å“åº”å¼ç¼–ç¨‹æŠ€æœ¯</p><h2 id="_4-react-hook-çš„ä½¿ç”¨é™åˆ¶æœ‰å“ªäº›" tabindex="-1"><a class="header-anchor" href="#_4-react-hook-çš„ä½¿ç”¨é™åˆ¶æœ‰å“ªäº›"><span>4. React Hook çš„ä½¿ç”¨é™åˆ¶æœ‰å“ªäº›ï¼Ÿ</span></a></h2><p>React Hooks çš„é™åˆ¶ä¸»è¦æœ‰ä¸¤æ¡ï¼š</p><ul><li>ä¸è¦åœ¨<strong>å¾ªç¯ã€æ¡ä»¶æˆ–åµŒå¥—å‡½æ•°</strong>ä¸­è°ƒç”¨ Hookï¼›</li><li>åœ¨ React çš„å‡½æ•°ç»„ä»¶ä¸­è°ƒç”¨ <code>Hook</code>ã€‚</li></ul><p>é‚£ä¸ºä»€ä¹ˆä¼šæœ‰è¿™æ ·çš„é™åˆ¶å‘¢ï¼ŸHooks çš„è®¾è®¡åˆè¡·æ˜¯ä¸ºäº†æ”¹è¿› React ç»„ä»¶çš„å¼€å‘æ¨¡å¼ã€‚åœ¨æ—§æœ‰çš„å¼€å‘æ¨¡å¼ä¸‹é‡åˆ°äº†ä¸‰ä¸ªé—®é¢˜ã€‚</p><ul><li><strong>ç»„ä»¶ä¹‹é—´éš¾ä»¥å¤ç”¨çŠ¶æ€é€»è¾‘</strong>ã€‚è¿‡å»å¸¸è§çš„è§£å†³æ–¹æ¡ˆæ˜¯é«˜é˜¶ç»„ä»¶ã€render props åŠçŠ¶æ€ç®¡ç†æ¡†æ¶ã€‚</li><li><strong>å¤æ‚çš„ç»„ä»¶å˜å¾—éš¾ä»¥ç†è§£</strong>ã€‚ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸ä¸šåŠ¡é€»è¾‘è€¦åˆå¤ªæ·±ï¼Œå¯¼è‡´å…³è”éƒ¨åˆ†éš¾ä»¥æ‹†åˆ†ã€‚</li><li><strong>äººå’Œæœºå™¨éƒ½å¾ˆå®¹æ˜“æ··æ·†ç±» class</strong>ã€‚å¸¸è§çš„æœ‰ this çš„é—®é¢˜ï¼Œä½†åœ¨ React å›¢é˜Ÿä¸­è¿˜æœ‰ç±»éš¾ä»¥ä¼˜åŒ–çš„é—®é¢˜ï¼Œå¸Œæœ›åœ¨ç¼–è¯‘ä¼˜åŒ–å±‚é¢åšå‡ºä¸€äº›æ”¹è¿›ã€‚</li></ul><p>è¿™ä¸‰ä¸ªé—®é¢˜åœ¨ä¸€å®šç¨‹åº¦ä¸Šé˜»ç¢äº† React çš„åç»­å‘å±•ï¼Œæ‰€ä»¥ä¸ºäº†è§£å†³è¿™ä¸‰ä¸ªé—®é¢˜ï¼Œ<strong>Hooks åŸºäºå‡½æ•°ç»„ä»¶</strong>å¼€å§‹è®¾è®¡ã€‚ç„¶è€Œç¬¬ä¸‰ä¸ªé—®é¢˜å†³å®šäº† Hooks åªæ”¯æŒå‡½æ•°ç»„ä»¶ã€‚</p><p>é‚£ä¸ºä»€ä¹ˆä¸è¦åœ¨å¾ªç¯ã€æ¡ä»¶æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨ Hook å‘¢ï¼Ÿå› ä¸º Hooks çš„è®¾è®¡æ˜¯<strong>åŸºäºæ•°ç»„</strong>å®ç°ã€‚åœ¨è°ƒç”¨æ—¶æŒ‰é¡ºåºåŠ å…¥æ•°ç»„ä¸­ï¼Œå¦‚æœä½¿ç”¨å¾ªç¯ã€æ¡ä»¶æˆ–åµŒå¥—å‡½æ•°å¾ˆæœ‰å¯èƒ½å¯¼è‡´æ•°ç»„å–å€¼é”™ä½ï¼Œæ‰§è¡Œé”™è¯¯çš„ Hookã€‚å½“ç„¶ï¼Œå®è´¨ä¸Š React çš„æºç é‡Œä¸æ˜¯æ•°ç»„ï¼Œæ˜¯<strong>é“¾è¡¨</strong>ã€‚</p><p>è¿™äº›é™åˆ¶ä¼šåœ¨ç¼–ç ä¸Šé€ æˆä¸€å®šç¨‹åº¦çš„å¿ƒæ™ºè´Ÿæ‹…ï¼Œæ–°æ‰‹å¯èƒ½ä¼šå†™é”™ï¼Œä¸ºäº†é¿å…è¿™æ ·çš„æƒ…å†µï¼Œå¯ä»¥å¼•å…¥ ESLint çš„ Hooks æ£€æŸ¥æ’ä»¶è¿›è¡Œé¢„é˜²ã€‚</p><h2 id="_5-useeffect-ä¸-uselayouteffect-çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_5-useeffect-ä¸-uselayouteffect-çš„åŒºåˆ«"><span>5. useEffect ä¸ useLayoutEffect çš„åŒºåˆ«</span></a></h2><blockquote><p>ä»€ä¹ˆæ˜¯å‰¯ä½œç”¨(<code>useEffect</code>)<br> å‰¯ä½œç”¨æ˜¯ç›¸å¯¹äºä¸»ä½œç”¨æ¥è¯´çš„ï¼Œä¸€ä¸ªå‡½æ•°é™¤äº†ä¸»ä½œç”¨ï¼Œå…¶ä»–çš„ä½œç”¨å°±æ˜¯å‰¯ä½œç”¨ã€‚å¯¹äº React ç»„ä»¶æ¥è¯´ï¼Œä¸»ä½œç”¨å°±æ˜¯æ ¹æ®æ•°æ®ï¼ˆstate/propsï¼‰æ¸²æŸ“ UIï¼Œé™¤æ­¤ä¹‹å¤–éƒ½æ˜¯å‰¯ä½œç”¨ï¼ˆæ¯”å¦‚ï¼Œæ‰‹åŠ¨ä¿®æ”¹ DOMï¼‰<br> å¸¸è§çš„å‰¯ä½œç”¨: 1. æ•°æ®è¯·æ±‚ ajax å‘é€ 2. æ‰‹åŠ¨ä¿®æ”¹ dom 3. localstorage æ“ä½œ</p></blockquote><blockquote><p>æ‰§è¡Œæ—¶æœº:</p><ol><li><strong>ä¸æ·»åŠ ä¾èµ–é¡¹</strong>: ç»„ä»¶é¦–æ¬¡æ¸²æŸ“æ‰§è¡Œä¸€æ¬¡ï¼Œä»¥åŠä¸ç®¡æ˜¯å“ªä¸ªçŠ¶æ€æ›´æ”¹å¼•èµ·ç»„ä»¶æ›´æ–°æ—¶éƒ½ä¼šé‡æ–°æ‰§è¡Œ <code>useEffect(()=&gt;{ })</code></li><li><strong>æ·»åŠ ç©ºæ•°ç»„</strong>: ç»„ä»¶åªåœ¨é¦–æ¬¡æ¸²æŸ“æ—¶æ‰§è¡Œä¸€æ¬¡ <code>useEffect(()=&gt;{ },[])</code></li><li><strong>æ·»åŠ ç‰¹å®šä¾èµ–é¡¹</strong>: å‰¯ä½œç”¨å‡½æ•°åœ¨é¦–æ¬¡æ¸²æŸ“æ—¶æ‰§è¡Œï¼Œåœ¨ä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–æ—¶é‡æ–°æ‰§è¡Œ <code>useEffect(()=&gt;{},[count])</code></li><li><strong>æ¸…ç†å‰¯ä½œç”¨</strong>: æƒ³è¦æ¸…ç†å‰¯ä½œç”¨ å¯ä»¥åœ¨å‰¯ä½œç”¨å‡½æ•°ä¸­çš„æœ«å°¾ return ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œåœ¨æ–°çš„å‡½æ•°ä¸­ç¼–å†™æ¸…ç†å‰¯ä½œç”¨çš„é€»è¾‘ <code>useEffect(()=&gt;{return()=&gt;{}},[count])</code></li></ol></blockquote><p>ï¼ˆ1ï¼‰<strong>å…±åŒç‚¹</strong></p><ul><li><strong>è¿ç”¨æ•ˆæœ</strong>ï¼š<code>useEffect</code> ä¸ <code>useLayoutEffect</code> ä¸¤è€…éƒ½æ˜¯ç”¨äºå¤„ç†å‰¯ä½œç”¨ï¼Œè¿™äº›å‰¯ä½œç”¨åŒ…æ‹¬æ”¹å˜ DOMã€è®¾ç½®è®¢é˜…ã€æ“ä½œå®šæ—¶å™¨ç­‰ã€‚<br> åœ¨å‡½æ•°ç»„ä»¶å†…éƒ¨æ“ä½œå‰¯ä½œç”¨æ˜¯ä¸è¢«å…è®¸çš„ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨è¿™ä¸¤ä¸ªå‡½æ•°å»å¤„ç†ã€‚<br></li><li><strong>ä½¿ç”¨æ–¹å¼</strong>ï¼šuseEffect ä¸ useLayoutEffect ä¸¤è€…åº•å±‚çš„å‡½æ•°ç­¾åæ˜¯å®Œå…¨ä¸€è‡´çš„ï¼Œéƒ½æ˜¯è°ƒç”¨çš„ <code>mountEffectImpl</code> æ–¹æ³•ï¼Œåœ¨ä½¿ç”¨ä¸Šä¹Ÿæ²¡ä»€ä¹ˆå·®å¼‚ï¼ŒåŸºæœ¬å¯ä»¥ç›´æ¥æ›¿æ¢ã€‚</li></ul><p>ï¼ˆ2ï¼‰<strong>ä¸åŒç‚¹</strong></p><ul><li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š<code>useEffect</code> åœ¨ React çš„æ¸²æŸ“è¿‡ç¨‹ä¸­æ˜¯è¢«<strong>å¼‚æ­¥</strong>è°ƒç”¨çš„ï¼Œç”¨äºç»å¤§å¤šæ•°åœºæ™¯ï¼›è€Œ <code>useLayoutEffect</code> ä¼šåœ¨æ‰€æœ‰çš„ DOM å˜æ›´ä¹‹å<strong>åŒæ­¥</strong>è°ƒç”¨ï¼Œä¸»è¦ç”¨äºå¤„ç† DOM æ“ä½œã€è°ƒæ•´æ ·å¼ã€é¿å…é¡µé¢é—ªçƒç­‰é—®é¢˜ã€‚<br> ä¹Ÿæ­£å› ä¸ºæ˜¯<strong>åŒæ­¥</strong>å¤„ç†ï¼Œæ‰€ä»¥éœ€è¦é¿å…åœ¨ <code>useLayoutEffect</code> åšè®¡ç®—é‡è¾ƒå¤§çš„è€—æ—¶ä»»åŠ¡ä»è€Œé€ æˆé˜»å¡ã€‚</li><li><strong>ä½¿ç”¨æ•ˆæœ</strong>ï¼š<code>useEffect</code> æ˜¯æŒ‰ç…§é¡ºåºæ‰§è¡Œä»£ç çš„ï¼Œæ”¹å˜å±å¹•åƒç´ ä¹‹åæ‰§è¡Œï¼ˆå…ˆæ¸²æŸ“ï¼Œåæ”¹å˜ DOMï¼‰ï¼Œå½“æ”¹å˜å±å¹•å†…å®¹æ—¶å¯èƒ½ä¼šäº§ç”Ÿé—ªçƒï¼›<br><code>useLayoutEffect</code> æ˜¯æ”¹å˜å±å¹•åƒç´ ä¹‹å‰å°±æ‰§è¡Œäº†ï¼ˆä¼šæ¨è¿Ÿé¡µé¢æ˜¾ç¤ºçš„äº‹ä»¶ï¼Œå…ˆæ”¹å˜ DOM åæ¸²æŸ“ï¼‰ï¼Œä¸ä¼šäº§ç”Ÿé—ªçƒã€‚<br><strong>useLayoutEffect æ€»æ˜¯æ¯” useEffect å…ˆæ‰§è¡Œ</strong>ã€‚<br><code>useEffect</code> æ˜¯<strong>å¼‚æ­¥</strong>æ‰§è¡Œï¼Œ<strong>æ‰§è¡Œæ—¶æœº</strong>æ˜¯æµè§ˆå™¨æ¸²æŸ“å®Œæˆä¹‹åï¼Œ<code>useLayoutEffect</code> æ˜¯<strong>åŒæ­¥</strong>æ‰§è¡Œçš„ï¼Œåœ¨ DOM æ›´æ–°åé©¬ä¸ŠåŒæ­¥è°ƒç”¨çš„ä»£ç ï¼Œç›¸å½“äº componentDidMount</li></ul><p>åœ¨æœªæ¥çš„è¶‹åŠ¿ä¸Šï¼Œä¸¤ä¸ª API æ˜¯ä¼šé•¿æœŸå…±å­˜çš„ï¼Œæš‚æ—¶æ²¡æœ‰åˆ å‡åˆå¹¶çš„è®¡åˆ’ï¼Œéœ€è¦å¼€å‘è€…æ ¹æ®åœºæ™¯å»è‡ªè¡Œé€‰æ‹©ã€‚<br> React å›¢é˜Ÿçš„å»ºè®®éå¸¸å®ç”¨ï¼Œå¦‚æœå®åœ¨åˆ†ä¸æ¸…ï¼Œå…ˆç”¨ useEffectï¼Œä¸€èˆ¬é—®é¢˜ä¸å¤§ï¼›å¦‚æœé¡µé¢æœ‰å¼‚å¸¸ï¼Œå†ç›´æ¥æ›¿æ¢ä¸º useLayoutEffect å³å¯ã€‚</p><h2 id="_6-react-hooks-åœ¨å¹³æ—¶å¼€å‘ä¸­éœ€è¦æ³¨æ„çš„é—®é¢˜å’ŒåŸå› " tabindex="-1"><a class="header-anchor" href="#_6-react-hooks-åœ¨å¹³æ—¶å¼€å‘ä¸­éœ€è¦æ³¨æ„çš„é—®é¢˜å’ŒåŸå› "><span>6. React Hooks åœ¨å¹³æ—¶å¼€å‘ä¸­éœ€è¦æ³¨æ„çš„é—®é¢˜å’ŒåŸå› </span></a></h2><p>ï¼ˆ1ï¼‰<strong>ä¸è¦åœ¨å¾ªç¯ï¼Œæ¡ä»¶æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨ Hookï¼Œå¿…é¡»å§‹ç»ˆåœ¨ React å‡½æ•°çš„é¡¶å±‚ä½¿ç”¨ Hook</strong></p><p>è¿™æ˜¯å› ä¸º React éœ€è¦åˆ©ç”¨è°ƒç”¨é¡ºåºæ¥æ­£ç¡®æ›´æ–°ç›¸åº”çš„çŠ¶æ€ï¼Œä»¥åŠè°ƒç”¨ç›¸åº”çš„é’©å­å‡½æ•°ã€‚ä¸€æ—¦åœ¨å¾ªç¯æˆ–æ¡ä»¶åˆ†æ”¯è¯­å¥ä¸­è°ƒç”¨ Hookï¼Œå°±å®¹æ˜“å¯¼è‡´è°ƒç”¨é¡ºåºçš„ä¸ä¸€è‡´æ€§ï¼Œä»è€Œäº§ç”Ÿéš¾ä»¥é¢„æ–™åˆ°çš„åæœã€‚</p><p>ï¼ˆ2ï¼‰<strong>ä½¿ç”¨ useState æ—¶å€™ï¼Œä½¿ç”¨ pushï¼Œpopï¼Œsplice ç­‰ç›´æ¥æ›´æ”¹æ•°ç»„å¯¹è±¡çš„å‘</strong></p><p>ä½¿ç”¨ push ç›´æ¥æ›´æ”¹æ•°ç»„æ— æ³•è·å–åˆ°æ–°å€¼ï¼Œåº”è¯¥é‡‡ç”¨<strong>ææ„æ–¹å¼</strong>ï¼Œä½†æ˜¯åœ¨ class é‡Œé¢ä¸ä¼šæœ‰è¿™ä¸ªé—®é¢˜ã€‚ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-tsx line-numbers-mode" data-highlighter="shiki" data-ext="tsx" data-title="tsx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Indicatorfilter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  let</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#986801;--shiki-dark:#E06C75;">num</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#E06C75;">setNums</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> useState</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  })</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  const</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> test</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> () </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // è¿™é‡Œå‘æ˜¯ç›´æ¥é‡‡ç”¨ push å»æ›´æ–° num</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // setNums(num)æ˜¯æ— æ³•æ›´æ–° num çš„</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // å¿…é¡»ä½¿ç”¨ num = [...num ,1]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    num</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">push</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // num = [...num ,1]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    setNums</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">num</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;"> className</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;filter&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;"> onClick</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">test</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;æµ‹è¯•&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">        {</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">num</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">map</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">item</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">index</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;"> key</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">index</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">item</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        ))</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">}</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  )</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Indicatorfilter</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#50A14F;--shiki-dark:#E5C07B;"> React</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Component</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">any</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">any</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  constructor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">props</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#0184BC;--shiki-dark:#E5C07B;"> any</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-light-font-style:inherit;--shiki-dark:#E5C07B;--shiki-dark-font-style:italic;">    super</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">props</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">state</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">      nums</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">],</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">test</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">test</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">bind</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  test</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // classé‡‡ç”¨åŒæ ·çš„æ–¹å¼æ˜¯æ²¡æœ‰é—®é¢˜çš„</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">nums</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">push</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setState</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">({</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">      nums</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">nums</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    })</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  render</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    let</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">nums</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> } </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">state</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;"> onClick</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">test</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;æµ‹è¯•2&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">          {</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">nums</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">map</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">item</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#0184BC;--shiki-dark:#E5C07B;"> any</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">index</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#0184BC;--shiki-dark:#E5C07B;"> number</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;"> key</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">index</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">item</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          ))</span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">}</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    )</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ï¼ˆ3ï¼‰<strong>useState è®¾ç½®çŠ¶æ€çš„æ—¶å€™ï¼Œåªæœ‰ç¬¬ä¸€æ¬¡ç”Ÿæ•ˆï¼ŒåæœŸéœ€è¦æ›´æ–°çŠ¶æ€ï¼Œå¿…é¡»é€šè¿‡ <code>useEffect</code></strong></p><p>TableDeail æ˜¯ä¸€ä¸ªå…¬å…±ç»„ä»¶ï¼Œåœ¨è°ƒç”¨å®ƒçš„çˆ¶ç»„ä»¶é‡Œé¢ï¼Œæˆ‘ä»¬é€šè¿‡ <code>set</code> æ”¹å˜ <code>columns</code> çš„å€¼ï¼Œä»¥ä¸ºä¼ é€’ç»™ TableDeail çš„<code>columns</code> æ˜¯æœ€æ–°çš„å€¼ï¼Œæ‰€ä»¥ tabColumn æ¯æ¬¡ä¹Ÿæ˜¯æœ€æ–°çš„å€¼ï¼Œä½†æ˜¯å®é™… tabColumn æ˜¯æœ€å¼€å§‹çš„å€¼ï¼Œä¸ä¼šéšç€ columns çš„æ›´æ–°è€Œæ›´æ–°ï¼š</p><div class="language-tsx line-numbers-mode" data-highlighter="shiki" data-ext="tsx" data-title="tsx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> TableDeail</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ({ </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">columns</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> TableData</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  const</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">tabColumn</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">setTabColumn</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> useState</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">columns</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// æ­£ç¡®çš„åšæ³•æ˜¯é€šè¿‡ useEffect æ”¹å˜è¿™ä¸ªå€¼</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> TableDeail</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ({ </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">columns</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> TableData</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  const</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">tabColumn</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">setTabColumn</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> useState</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">columns</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  useEffect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    setTabColumn</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">columns</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  }, [</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">columns</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">])</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ï¼ˆ4ï¼‰<strong>å–„ç”¨ <code>useCallback</code></strong></p><p>çˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶äº‹ä»¶å¥æŸ„æ—¶ï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰ä»»ä½•å‚æ•°å˜åŠ¨å¯èƒ½ä¼šé€‰ç”¨ <code>useMemo</code>ã€‚ä½†æ˜¯æ¯ä¸€æ¬¡çˆ¶ç»„ä»¶æ¸²æŸ“å­ç»„ä»¶å³ä½¿æ²¡å˜åŒ–ä¹Ÿä¼šè·Ÿç€æ¸²æŸ“ä¸€æ¬¡ã€‚</p><p>ï¼ˆ5ï¼‰<strong>ä¸è¦æ»¥ç”¨ useContext</strong></p><p>å¯ä»¥ä½¿ç”¨åŸºäº <code>useContext</code> å°è£…çš„çŠ¶æ€ç®¡ç†å·¥å…·ã€‚</p><div class="language-tsx line-numbers-mode" data-highlighter="shiki" data-ext="tsx" data-title="tsx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">createContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">useContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;react&#39;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// åˆ›å»ºContextå¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> Context</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> createContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// åº•å±‚ç»„ä»¶é€šè¿‡useContextå‡½æ•°è·å–æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> name</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> useContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">Context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// é¡¶å±‚ç»„ä»¶é€šè¿‡Provider æä¾›æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Context.Provider</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;"> value</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;this is name&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Foo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/&gt;&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Context.Provider</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="usecallback-å’Œ-usememo-åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#usecallback-å’Œ-usememo-åŒºåˆ«"><span>useCallback å’Œ useMemo åŒºåˆ«</span></a></h2><p>React ä¸­çš„<code>useMemo</code>å’Œ<code>useCallback</code>æ˜¯ä¸¤ä¸ªé‡è¦çš„ Hooksã€‚å¸¸å¸¸è¢«ç”¨äºä¼˜åŒ–ç»„ä»¶çš„æ€§èƒ½ã€‚è™½ç„¶è¿™ä¸¤ä¸ª Hooks çœ‹èµ·æ¥å¾ˆç›¸ä¼¼ï¼Œä½†å®ƒä»¬å½¼æ­¤ä¹‹é—´è¿˜æ˜¯æœ‰å¾ˆå¤§çš„åŒºåˆ«çš„ã€‚</p><h4 id="usememo" tabindex="-1"><a class="header-anchor" href="#usememo"><span><code>useMemo</code></span></a></h4><p>æ˜¯ç”¨æ¥<strong>ç¼“å­˜è®¡ç®—ç»“æœ</strong>ï¼Œç¡®ä¿åªæœ‰åœ¨ä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–æ—¶æ‰ä¼šé‡æ–°è®¡ç®—ã€‚<code>useMemo</code> çš„å®ç°æ–¹å¼æ˜¯é€šè¿‡ç¼“å­˜è®¡ç®—ç»“æœï¼Œå½“ä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé‡æ–°è®¡ç®—ç»“æœå¹¶è¿”å›ã€‚</p><p>useMemo</p><ul><li>useMemoï¼šå…è®¸é€šè¿‡è®°ä½ä¸Šä¸€ä¸ªç»“æœçš„æ–¹å¼åœ¨å¤šæ¬¡æ¸²æŸ“çš„ä¹‹é—´<strong>ç¼“å­˜è®¡ç®—ç»“æœ</strong>,ä½¿å¾—æ§åˆ¶å…·ä½“å­èŠ‚ç‚¹ä½•æ—¶æ›´æ–°å˜å¾—æ›´å®¹æ˜“</li><li>ä½¿ç”¨å¯¹è±¡ï¼š<strong>å˜é‡</strong></li><li>ä½¿ç”¨æ¡ä»¶ï¼šçˆ¶ç»„ä»¶ä¼ ç»™å­ç»„ä»¶çš„å˜é‡</li><li>ä¼˜ç‚¹ï¼š<code>useMemo</code> åŒ…è£¹çš„å˜é‡ï¼Œ<strong>ç›¸å½“äºå¯¹å˜é‡åšäº†ç¼“å­˜</strong>ï¼Œå½“çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼Œå˜é‡ä¸ä¼šæ”¹å˜==ã€‹å­ç»„ä»¶ä¸ä¼šé‡æ¸²æŸ“</li><li>useMemo æ‰§è¡Œçš„å‡ ç§æƒ…å†µï¼š <ul><li>é¦–æ¬¡æ¸²æŸ“</li><li>éé¦–æ¬¡æ¸²æŸ“ <ul><li>ä¾èµ–å‘ç”Ÿæ”¹å˜</li><li>ä¸ºç©ºæ•°ç»„æ—¶</li></ul></li></ul></li></ul><p>ä¸¾ä¸ªä¾‹å­</p><ul><li>ç°åœ¨æˆ‘ä»¬æœ‰ä¸ª Tree ç»„ä»¶ï¼Œä»–ä¼šæ¸²æŸ“ä¸€ä¸ªå¾ˆè€—æ€§èƒ½çš„å¤§ç»„ä»¶ <code>ExpensiveTree</code></li></ul><div class="language-tsx line-numbers-mode" data-highlighter="shiki" data-ext="tsx" data-title="tsx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Tree</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  let</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> appContextValue</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> useContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">AppContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  let</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> theme</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> appContextValue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">theme</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ExpensiveTree</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;"> className</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">theme</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ç”±äº AppContext ä¸­åŒ…å«å¾ˆå¤šä¸ theme æ— å…³çš„ stateï¼Œå¯¼è‡´æ¯æ¬¡å…¶ä»–æ— å…³çš„ state æ›´æ–°ï¼ŒTree éƒ½ä¼šé‡æ–° renderï¼Œè¿›è€Œ ExpensiveTree ç»„ä»¶ä¹Ÿé‡æ–° renderã€‚</li><li>useMemo å°±èƒ½æ´¾ä¸Šç”¨åœº</li></ul><div class="language-tsx line-numbers-mode" data-highlighter="shiki" data-ext="tsx" data-title="tsx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Tree</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  let</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> appContextValue</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> useContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">AppContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  let</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> theme</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> appContextValue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">theme</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  return</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> useMemo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ExpensiveTree</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;"> className</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">theme</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  }, [</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">theme</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">])</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å³ä½¿ AppContext æ”¹å˜å¯¼è‡´ Tree åå¤ renderï¼ŒExpensiveTree ä¹Ÿåªä¼šåœ¨ theme æ”¹å˜å renderã€‚</li></ul><h4 id="usecallback" tabindex="-1"><a class="header-anchor" href="#usecallback"><span><code>useCallback</code></span></a></h4><p>æ˜¯ç”¨äº<strong>ç¼“å­˜å‡½æ•°</strong>ï¼Œç¡®ä¿åªæœ‰åœ¨ä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–æ—¶æ‰ä¼šé‡æ–°åˆ›å»ºå‡½æ•°ã€‚useCallback çš„å®ç°æ–¹å¼æ˜¯<strong>ç¼“å­˜å‡½æ•°æœ¬èº«</strong>ï¼Œå½“ä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé‡æ–°åˆ›å»ºå‡½æ•°å¹¶è¿”å›ã€‚</p><ul><li>ä½¿ç”¨å¯¹è±¡ï¼š<strong>å‡½æ•°</strong><br></li><li>ä½¿ç”¨æ¡ä»¶ï¼šçˆ¶ç»„ä»¶ä¼ ç»™å­ç»„ä»¶çš„å‡½æ•°<br></li><li>ä¼˜ç‚¹ï¼š <code>useCallback</code>åŒ…è£¹çš„å‡½æ•°ï¼Œç›¸å½“äºå¯¹å‡½æ•°åšäº†ç¼“å­˜ï¼Œå½“çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼Œå‡½æ•°ä¸ä¼šé‡æ–°å®šä¹‰==&gt;å­ç»„ä»¶ä¸ä¼šé‡æ–°æ¸²æŸ“<br></li><li>æ³¨æ„ï¼šä¾èµ–é¡¹æ•°ç»„ä¸ä¼šä½œä¸ºå‚æ•°ä¼ ç»™å›è°ƒå‡½æ•°ã€‚è™½ç„¶ä»æ¦‚å¿µä¸Šæ¥è¯´å®ƒè¡¨ç°ä¸ºï¼šæ‰€æœ‰å›è°ƒå‡½æ•°ä¸­å¼•ç”¨çš„å€¼éƒ½åº”è¯¥å‡ºç°åœ¨ä¾èµ–é¡¹æ•°ç»„ä¸­ã€‚<br></li><li>ä½¿ç”¨åœºæ™¯ï¼šæœ‰ä¸€ä¸ªçˆ¶ç»„ä»¶ï¼Œå…¶ä¸­åŒ…å«å­ç»„ä»¶ï¼Œå­ç»„ä»¶æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸º propsï¼›é€šå¸¸è€Œè¨€ï¼Œå¦‚æœçˆ¶ç»„ä»¶æ›´æ–°äº†ï¼Œå­ç»„ä»¶ä¹Ÿä¼šæ‰§è¡Œæ›´æ–°ï¼›ä½†æ˜¯å¤§å¤šæ•°åœºæ™¯ä¸‹ï¼Œæ›´æ–°æ˜¯æ²¡æœ‰å¿…è¦çš„ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©<code>useCallback</code>æ¥è¿”å›å‡½æ•°ï¼Œç„¶åæŠŠè¿™ä¸ªå‡½æ•°ä½œä¸º props ä¼ é€’ç»™å­ç»„ä»¶ï¼›è¿™æ ·ï¼Œå­ç»„ä»¶å°±èƒ½é¿å…ä¸å¿…è¦çš„æ›´æ–°</li><li>useCallback ä¸èƒ½æ»¥ç”¨ï¼Œå¦åˆ™åªä¼šæ¶ˆè€—æ€§èƒ½,å¦‚æœä½ éœ€è¦<strong>å°†è¯¥å‡½æ•°ä¼ é€’ç»™å­ç»„ä»¶</strong>ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨<code>useCallback</code>è¿›è¡Œå‡½æ•°çš„ç¼“å­˜</li><li>çœŸæ­£æœ‰åŠ©äºæ€§èƒ½æ”¹å–„çš„ï¼Œæœ‰ 2 ç§åœºæ™¯ <ul><li>å‡½æ•°å®šä¹‰æ—¶éœ€è¦è¿›è¡Œå¤§é‡è¿ç®—ï¼Œ è¿™ç§åœºæ™¯æå°‘</li><li>éœ€è¦æ¯”è¾ƒå¼•ç”¨çš„åœºæ™¯ï¼Œ<code>useEffect</code>ï¼Œåˆæˆ–è€…æ˜¯é…åˆ<code>React.Memo</code>ä½¿ç”¨</li></ul></li><li>åŒæ ·çš„åœºæ™¯ï¼Œå¦‚æœè¯¥ç»„ä»¶ä¸€å®šåªä¼šæ¸²æŸ“ä¸€æ¬¡ï¼Œé‚£ä¹ˆä½¿ç”¨<code>useCallback</code>å°±å®Œå…¨æ²¡æœ‰å¿…è¦ã€‚</li><li><strong>æ€»ç»“</strong>ï¼š <ul><li>åˆ©ç”¨é—­åŒ…ç¼“å­˜ä¸Šæ¬¡ç»“æœ</li><li>æˆæœ¬ï¼šé¢å¤–çš„ç¼“å­˜ï¼Œä¸æ¯”è¾ƒé€»è¾‘</li><li>ä¸æ˜¯ç»å¯¹çš„ä¼˜åŒ–ï¼Œè€Œæ˜¯ä¸€ç§æˆæœ¬çš„äº¤æ¢ï¼Œå¹¶éä½¿ç”¨æ‰€æœ‰åœºæ™¯</li></ul></li></ul><div class="language-tsx line-numbers-mode" data-highlighter="shiki" data-ext="tsx" data-title="tsx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">useCallback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">useState</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">useEffect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> } </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> React</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> set</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Child</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ({ </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">callback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  const</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">count</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">setCount</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> useState</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  useEffect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;09&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    setCount</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">callback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">())</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  }, [</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">callback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]) </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//å½“callbackæ›´æ–°æ—¶æ‰§è¡Œcallbackå‡½æ•°ï¼Œå¾—åˆ°parentç»„ä»¶æœ€æ–°çš„count</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; child count:</span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">count</span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> App</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> () </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  const</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">count</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">setCount</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> useState</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  const</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">val</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">setVal</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> useState</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> callback</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> useCallback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">count</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">8</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> count</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  }, [</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">count</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]) </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//countæ›´æ–°æ—¶æ‰§è¡Œ</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">  set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">add</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">callback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//å€ŸåŠ©ES6æ–°å¢çš„æ•°æ®ç±»å‹Setæ¥åˆ¤æ–­å½“ä¾èµ–countå˜æ›´æ—¶æ˜¯å¦è¿”å›æ–°çš„å‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">  console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">9</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">h4</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;parent count:</span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">count</span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">h4</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">h4</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;set size:</span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">size</span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">h4</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">button</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;"> onClick</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> setCount</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">count</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;+&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">button</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">input</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;"> value</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">val</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;"> onChange</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">event</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> setVal</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">event</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">target</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      &lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Child</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;"> callback</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">callback</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  )</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#å¯¹æ¯”"><span><a href="https://juejin.cn/post/7146107198215553055?searchId=202312112248122D0157A90ECD11B446D2" target="_blank" rel="noopener noreferrer">å¯¹æ¯”</a></span></a></h4><div class="language-tsx line-numbers-mode" data-highlighter="shiki" data-ext="tsx" data-title="tsx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> React</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, { </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">useState</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">useMemo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">useCallback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;react&#39;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> MyComponent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">props</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  const</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">count</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">setCount</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> useState</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> expensiveFunction</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> useMemo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;calculating...&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    let</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> result</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">let</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">i</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> &amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">lt</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">count</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> *</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 100000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">i</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">++</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">      result</span><span style="--shiki-light:#0184BC;--shiki-dark:#C678DD;"> +=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> result</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  }, [</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">count</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">])</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> handleClick</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> useCallback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;clicked...&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> );</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    setCount</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">count</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  }, [</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">count</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">( &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">p</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;count: </span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">count</span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">p</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">p</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;expensiveFunction: </span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">expensiveFunction</span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">p</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">button</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;"> onClick</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">handleClick</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;Click me&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">button</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¾‹å­ä¸­ï¼Œå®šä¹‰äº†ä¸€ä¸ª MyComponent ç»„ä»¶ï¼Œå…¶ä¸­åŒ…å«äº†ä¸€ä¸ªçŠ¶æ€å€¼ <code>count</code> å’Œä¸€ä¸ªè®¡ç®—é‡å¾ˆå¤§çš„å‡½æ•° <code>expensiveFunction</code>ã€‚<br> ä½¿ç”¨ <code>useMemo</code> å¯¹ <code>expensiveFunction</code> è¿›è¡Œäº†ç¼“å­˜ï¼Œåœ¨ count å‘ç”Ÿå˜åŒ–æ—¶æ‰ä¼šé‡æ–°è®¡ç®— <code>expensiveFunction</code>ã€‚<br> ä½¿ç”¨ useCallback å¯¹ <code>handleClick</code> è¿›è¡Œäº†ç¼“å­˜ï¼Œåœ¨ count å‘ç”Ÿå˜åŒ–æ—¶æ‰ä¼šé‡æ–°åˆ›å»º <code>handleClick</code> å‡½æ•°ã€‚</p><p><strong>æ€»ç»“</strong>ï¼š</p><ul><li><p>ç›¸åŒç‚¹ï¼š</p><ul><li>useCallback å’Œ useMemo <strong>å‚æ•°ç›¸åŒ</strong>ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¾èµ–é¡¹çš„æ•°ç»„ã€‚</li><li>useMemoã€useCallback éƒ½æ˜¯ä½¿å‚æ•°ï¼ˆå‡½æ•°ï¼‰ä¸ä¼šå› ä¸ºå…¶ä»–ä¸ç›¸å…³çš„å‚æ•°å˜åŒ–è€Œé‡æ–°æ¸²æŸ“ã€‚</li><li>ä¸ useEffect ç±»ä¼¼ï¼Œ[] å†…å¯ä»¥æ”¾å…¥ä½ æ”¹å˜æ•°å€¼å°±é‡æ–°æ¸²æŸ“å‚æ•°ï¼ˆå‡½æ•°ï¼‰çš„å¯¹è±¡ã€‚å¦‚æœ [] ä¸ºç©ºå°±æ˜¯åªæ¸²æŸ“ä¸€æ¬¡ï¼Œä¹‹åéƒ½ä¸ä¼šæ¸²æŸ“</li></ul></li><li><p>åŒºåˆ«ï¼š</p><ul><li>ä¸»è¦åŒºåˆ«æ˜¯ <code>React.useMemo</code> å°†è°ƒç”¨ fn å‡½æ•°å¹¶è¿”å›å…¶ç»“æœï¼Œè€Œ <code>React.useCallback</code> å°†è¿”å› fn å‡½æ•°è€Œä¸è°ƒç”¨å®ƒã€‚</li><li>useMemo ç”¨äºç¼“å­˜è®¡ç®—ç»“æœï¼Œç¡®ä¿åªæœ‰åœ¨ä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–æ—¶æ‰ä¼šé‡æ–°è®¡ç®—ã€‚</li><li>useCallback ç”¨äºç¼“å­˜å‡½æ•°ï¼Œç¡®ä¿åªæœ‰åœ¨ä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–æ—¶æ‰ä¼šé‡æ–°åˆ›å»ºå‡½æ•°ã€‚</li><li><code>useMemo</code> ä¼˜åŒ–çš„æ˜¯è®¡ç®—ç»“æœçš„ç¼“å­˜ï¼Œè€Œ <code>useCallback</code> ä¼˜åŒ–çš„æ˜¯å‡½æ•°çš„ç¼“å­˜ã€‚</li></ul><p>å¦‚æœéœ€è¦ç»å¸¸ä½¿ç”¨æŸä¸ªå‡½æ•°ï¼Œè€Œè¿™ä¸ªå‡½æ•°çš„è®¡ç®—é‡å¾ˆå¤§ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ <code>useMemo</code> è¿›è¡Œå‡½æ•°çš„ç¼“å­˜ï¼Œè€Œå¦‚æœéœ€è¦å°†è¯¥å‡½æ•°ä¼ é€’ç»™å­ç»„ä»¶ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ <code>useCallback</code> è¿›è¡Œå‡½æ•°çš„ç¼“å­˜ã€‚</p></li></ul><h2 id="_7-react-hooks-å’Œç”Ÿå‘½å‘¨æœŸçš„å…³ç³»" tabindex="-1"><a class="header-anchor" href="#_7-react-hooks-å’Œç”Ÿå‘½å‘¨æœŸçš„å…³ç³»"><span>7. React Hooks å’Œç”Ÿå‘½å‘¨æœŸçš„å…³ç³»ï¼Ÿ</span></a></h2><p><strong>å‡½æ•°ç»„ä»¶</strong> çš„æœ¬è´¨æ˜¯å‡½æ•°ï¼Œæ²¡æœ‰ <code>state</code> çš„æ¦‚å¿µçš„ï¼Œå› æ­¤<strong>ä¸å­˜åœ¨ç”Ÿå‘½å‘¨æœŸ</strong>ä¸€è¯´ï¼Œä»…ä»…æ˜¯ä¸€ä¸ª <strong>render å‡½æ•°</strong>è€Œå·²ã€‚<br> ä½†æ˜¯å¼•å…¥ Hooks ä¹‹åå°±å˜å¾—ä¸åŒäº†ï¼Œå®ƒèƒ½è®©ç»„ä»¶åœ¨ä¸ä½¿ç”¨ class çš„æƒ…å†µä¸‹æ‹¥æœ‰ <code>state</code>ï¼Œæ‰€ä»¥å°±æœ‰äº†ç”Ÿå‘½å‘¨æœŸçš„æ¦‚å¿µï¼Œæ‰€è°“çš„ç”Ÿå‘½å‘¨æœŸå…¶å®å°±æ˜¯ <code>useState</code> ã€ <code>useEffect()</code> å’Œ <code>useLayoutEffect()</code> ã€‚</p><p>å³ï¼š<strong>Hooks ç»„ä»¶ï¼ˆä½¿ç”¨äº† Hooks çš„å‡½æ•°ç»„ä»¶ï¼‰æœ‰ç”Ÿå‘½å‘¨æœŸï¼Œè€Œå‡½æ•°ç»„ä»¶ï¼ˆæœªä½¿ç”¨ Hooks çš„å‡½æ•°ç»„ä»¶ï¼‰æ˜¯æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸçš„</strong>ã€‚</p><p>ä¸‹é¢æ˜¯å…·ä½“çš„ <code>class</code> ä¸ <code>Hooks</code> çš„<strong>ç”Ÿå‘½å‘¨æœŸ</strong>å¯¹åº”å…³ç³»ï¼š</p><ul><li><code>constructor</code> ï¼šå‡½æ•°ç»„ä»¶ä¸éœ€è¦æ„é€ å‡½æ•°ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨ <code>useState</code> æ¥åˆå§‹åŒ– <code>state</code> ã€‚å¦‚æœè®¡ç®—çš„ä»£ä»·æ¯”è¾ƒæ˜‚è´µï¼Œä¹Ÿå¯ä»¥ä¼ ä¸€ä¸ªå‡½æ•°ç»™ <code>useState</code></li></ul><div class="language-tsx line-numbers-mode" data-highlighter="shiki" data-ext="tsx" data-title="tsx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">num</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">UpdateNum</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> useState</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// useEffect - å‘é€ç½‘ç»œè¯·æ±‚ ä¸å¯ä»¥ç›´æ¥åœ¨useEffectçš„å›è°ƒå‡½æ•°å¤–å±‚ç›´æ¥åŒ…è£¹ await ï¼Œå› ä¸ºå¼‚æ­¥ä¼šå¯¼è‡´æ¸…ç†å‡½æ•°æ— æ³•ç«‹å³è¿”å›</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">useEffect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  async</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> fetchData</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> res</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> await</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> axios</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;http://geek.itheima.net/channels&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">res</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}, [])</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// useRef ä½¿ç”¨useRefè·å–çœŸå®domæˆ–ç»„ä»¶å®ä¾‹çš„æ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> h1Ref</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> useRef</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  &lt;&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">h1</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;"> ref</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">h1Ref</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;this is h1&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">h1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  &lt;/&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// åº•å±‚ç»„ä»¶é€šè¿‡useContextå‡½æ•°è·å–æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> name</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> useContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">Context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>getDerivedStateFromProps</code> ï¼šä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸éœ€è¦ä½¿ç”¨å®ƒï¼Œå¯ä»¥åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­æ›´æ–° stateï¼Œä»¥è¾¾åˆ°å®ç° <code>getDerivedStateFromProps</code> çš„ç›®çš„ã€‚</li></ul><div class="language-tsx line-numbers-mode" data-highlighter="shiki" data-ext="tsx" data-title="tsx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ScrollView</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">({ </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">row</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  let</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#986801;--shiki-dark:#E06C75;">isScrollingDown</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#E06C75;">setIsScrollingDown</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> useState</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  let</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#986801;--shiki-dark:#E06C75;">prevRow</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#E06C75;">setPrevRow</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> useState</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">row</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> !==</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> prevRow</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // Row è‡ªä¸Šæ¬¡æ¸²æŸ“ä»¥æ¥å‘ç”Ÿè¿‡æ”¹å˜ã€‚æ›´æ–° isScrollingDownã€‚</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    setIsScrollingDown</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">prevRow</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> !==</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> &amp;&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> row</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> &gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> prevRow</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    setPrevRow</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">row</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  return</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> `Scrolling down: </span><span style="--shiki-light:#50A14F;--shiki-dark:#C678DD;">${</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">isScrollingDown</span><span style="--shiki-light:#50A14F;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">`</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>React ä¼šç«‹å³é€€å‡ºç¬¬ä¸€æ¬¡æ¸²æŸ“å¹¶ç”¨æ›´æ–°åçš„ state é‡æ–°è¿è¡Œç»„ä»¶ä»¥é¿å…è€—è´¹å¤ªå¤šæ€§èƒ½ã€‚</p><ul><li><code>shouldComponentUpdate</code> ï¼šå¯ä»¥ç”¨ <code>React.memo</code> åŒ…è£¹ä¸€ä¸ªç»„ä»¶æ¥å¯¹å®ƒçš„ <strong><code>props</code> è¿›è¡Œæµ…æ¯”è¾ƒ</strong></li></ul><div class="language-tsx line-numbers-mode" data-highlighter="shiki" data-ext="tsx" data-title="tsx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> Button</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> React</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">memo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">props</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // å…·ä½“çš„ç»„ä»¶</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">})</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ³¨æ„</strong>ï¼š <code>React.memo</code> ç­‰æ•ˆäº <code>PureComponent</code> ï¼Œå®ƒåª<strong>æµ…æ¯”è¾ƒ <code>props</code></strong>ã€‚è¿™é‡Œä¹Ÿå¯ä»¥ä½¿ç”¨ <code>useMemo</code> ä¼˜åŒ–æ¯ä¸€ä¸ªèŠ‚ç‚¹ã€‚</p><ul><li><code>render</code> ï¼šè¿™æ˜¯å‡½æ•°ç»„ä»¶ä½“æœ¬èº«ã€‚</li><li><code>componentDidMount</code> , <code>componentDidUpdate</code> ï¼š <code>useLayoutEffect</code> ä¸å®ƒä»¬ä¸¤çš„è°ƒç”¨é˜¶æ®µæ˜¯ä¸€æ ·çš„ã€‚<br> ä½†æ˜¯ï¼Œæˆ‘ä»¬æ¨èä½ ä¸€å¼€å§‹å…ˆç”¨ <code>useEffect</code>ï¼Œåªæœ‰å½“å®ƒå‡ºé—®é¢˜çš„æ—¶å€™å†å°è¯•ä½¿ç”¨ <code>useLayoutEffect</code> ã€‚ <code>useEffect</code> å¯ä»¥è¡¨è¾¾æ‰€æœ‰è¿™äº›çš„ç»„åˆã€‚</li></ul><div class="language-tsx line-numbers-mode" data-highlighter="shiki" data-ext="tsx" data-title="tsx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// componentDidMount</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">useEffect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // éœ€è¦åœ¨ componentDidMount æ‰§è¡Œçš„å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}, []);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">useEffect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // åœ¨ componentDidMountï¼Œä»¥åŠ count æ›´æ”¹æ—¶ componentDidUpdate æ‰§è¡Œçš„å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">  document</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">title</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> `You clicked </span><span style="--shiki-light:#50A14F;--shiki-dark:#C678DD;">${</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">count</span><span style="--shiki-light:#50A14F;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> times`</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> () </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line highlighted"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // éœ€è¦åœ¨ count æ›´æ”¹æ—¶ componentDidUpdateï¼ˆå…ˆäº document.title = ... æ‰§è¡Œï¼Œéµå®ˆå…ˆæ¸…ç†åæ›´æ–°ï¼‰</span></span>
<span class="line highlighted"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // ä»¥åŠ componentWillUnmount æ‰§è¡Œçš„å†…å®¹</span></span>
<span class="line highlighted"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  }; </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// å½“å‡½æ•°ä¸­ Cleanup å‡½æ•°ä¼šæŒ‰ç…§åœ¨ä»£ç ä¸­å®šä¹‰çš„é¡ºåºå…ˆåæ‰§è¡Œï¼Œä¸å‡½æ•°æœ¬èº«çš„ç‰¹æ€§æ— å…³</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}, [</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">count</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]); </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ä»…åœ¨ count æ›´æ”¹æ—¶æ›´æ–°</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¯·è®°å¾— React ä¼šç­‰å¾…æµè§ˆå™¨å®Œæˆç”»é¢æ¸²æŸ“ä¹‹åæ‰ä¼šå»¶è¿Ÿè°ƒç”¨ ï¼Œå› æ­¤ä¼šä½¿å¾—é¢å¤–æ“ä½œå¾ˆæ–¹ä¾¿ <code>componentWillUnmount</code> ï¼šç›¸å½“äº <code>useEffect</code> é‡Œé¢è¿”å›çš„ <code>cleanup</code> å‡½æ•°</p><div class="language-tsx line-numbers-mode" data-highlighter="shiki" data-ext="tsx" data-title="tsx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// componentDidMount/componentWillUnmount</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">useEffect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // éœ€è¦åœ¨ componentDidMount æ‰§è¡Œçš„å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  return</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> cleanup</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // éœ€è¦åœ¨ componentWillUnmount æ‰§è¡Œçš„å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}, [])</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>componentDidCatch</code> and <code>getDerivedStateFromError</code> ï¼šç›®å‰è¿˜æ²¡æœ‰è¿™äº›æ–¹æ³•çš„ Hook ç­‰ä»·å†™æ³•ï¼Œä½†å¾ˆå¿«ä¼šåŠ ä¸Šã€‚</li></ul><table><thead><tr><th>class ç»„ä»¶</th><th>Hooks ç»„ä»¶</th></tr></thead><tbody><tr><td><code>constructor</code></td><td><code>useState</code></td></tr><tr><td><code>getDerivedStateFromProps</code></td><td><code>useState</code> é‡Œé¢ update å‡½æ•°</td></tr><tr><td><code>shouldComponentUpdate</code></td><td><code>useMemo</code></td></tr><tr><td>render</td><td>å‡½æ•°æœ¬èº«</td></tr><tr><td><code>componentDidMount</code></td><td><code>useEffect</code></td></tr><tr><td><code>componentDidUpdate</code></td><td><code>useEffect</code></td></tr><tr><td>componentWillUnmount</td><td>useEffect é‡Œé¢è¿”å›çš„å‡½æ•°</td></tr><tr><td>componentDidCatch</td><td>æ— </td></tr><tr><td>getDerivedStateFromError</td><td>æ— </td></tr></tbody></table></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/vuepress-theme-hope/vuepress-theme-hope/edit/main/src/largeFront/react/react_hooks.md" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ" rel="noopener noreferrer" target="_blank" iconsizing="both"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><span class="vp-meta-info" data-allow-mismatch="text">2025/2/26 14:47:36</span></div><div class="contributors"><span class="vp-meta-label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="vp-meta-info" title="email: htong890@outlook.com">hr-koala</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link route-link-active auto-link prev" href="/htblog/largeFront/react/" aria-label="Reactç³»åˆ—" iconsizing="both"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->Reactç³»åˆ—</div></a><a class="route-link auto-link next" href="/htblog/largeFront/react/react_problem.html" aria-label="React å¸¸è§é—®é¢˜ç‚¹(ä¸€)" iconsizing="both"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">React å¸¸è§é—®é¢˜ç‚¹(ä¸€)<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">å¼€å‘è€…</div><div class="vp-copyright">Copyright Â© 2025 htong </div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/htblog/assets/app-Bnjw32HE.js" defer></script>
  </body>
</html>
